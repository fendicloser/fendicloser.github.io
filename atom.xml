<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Longfu Sun</title>
  
  <subtitle>Live a life you will remember</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://fendicloser.top/"/>
  <updated>2019-04-17T12:26:57.885Z</updated>
  <id>http://fendicloser.top/</id>
  
  <author>
    <name>Longfu Sun</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>dom、jquery获取常用浏览器尺寸和其应用。</title>
    <link href="http://fendicloser.top/2019/04/17/dom%E3%80%81jquery%E8%8E%B7%E5%8F%96%E5%B8%B8%E7%94%A8%E6%B5%8F%E8%A7%88%E5%99%A8%E5%B0%BA%E5%AF%B8%E5%92%8C%E5%85%B6%E5%BA%94%E7%94%A8%E3%80%82/"/>
    <id>http://fendicloser.top/2019/04/17/dom、jquery获取常用浏览器尺寸和其应用。/</id>
    <published>2019-04-17T11:52:13.000Z</published>
    <updated>2019-04-17T12:26:57.885Z</updated>
    
    <content type="html"><![CDATA[<p>在浏览一些社交网站、内容网站时，我们经常发现当滚轮马上就要拉到屏幕地下是的时候，浏览器会自动为你追加内容，追加的内容怎么都追加不完。</p><p>可谓深受其害，在找工作的时候，我时常希望能查看网站最底下的公司地址、证书号或点击”加入我们”，结果就是不让我看到这些内容，，，</p><p>言归正传，这其实是一种有效的分割网络请求的方式，当前用户对首屏事件长短的要求越来越苛刻，有效的分割网络请求是提高网站前端性能的重要方式。</p><p>将ajax请求分割到用户的每次下拉到低的动作上，需要现保存上一次解决的数据结束的位置。对于初学者而言，实现这一功能的前提是知道如果获取滚轮现在的位置，这里现列出几个和浏览器宽高有关的参数：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">页可见区域宽： <span class="built_in">document</span>.body.clientWidth;</span><br><span class="line">网页可见区域高： <span class="built_in">document</span>.body.clientHeight;</span><br><span class="line">网页可见区域宽： <span class="built_in">document</span>.body.offsetWidth (包括边线的宽);</span><br><span class="line">网页可见区域高： <span class="built_in">document</span>.body.offsetHeight (包括边线的宽);</span><br><span class="line">网页正文全文宽： <span class="built_in">document</span>.body.scrollWidth;</span><br><span class="line">网页正文全文高： <span class="built_in">document</span>.body.scrollHeight;</span><br><span class="line">网页被卷去的高： <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">网页被卷去的左： <span class="built_in">document</span>.body.scrollLeft;</span><br><span class="line">网页正文部分上： <span class="built_in">window</span>.screenTop;</span><br><span class="line">网页正文部分左： <span class="built_in">window</span>.screenLeft;</span><br><span class="line">屏幕分辨率的高： <span class="built_in">window</span>.screen.height;</span><br><span class="line">屏幕分辨率的宽： <span class="built_in">window</span>.screen.width;</span><br><span class="line">屏幕可用工作区高度： <span class="built_in">window</span>.screen.availHeight;</span><br></pre></td></tr></table></figure></p><p>上面这些参数在工作中还是经常会被用到的。也都非常基础的dom操作。<br>对于它们，原生和jquery都非常容易进行操作：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"> <span class="built_in">window</span>.onscroll = <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     </span><br><span class="line">     <span class="comment">//scrollTop就是触发滚轮事件时滚轮的高度</span></span><br><span class="line">     <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">"滚动距离"</span> + scrollTop);</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//为了保证兼容性，这里取两个值，哪个有值取哪一个</span></span><br><span class="line">    <span class="comment">//scrollTop就是触发滚轮事件时滚轮的高度</span></span><br><span class="line">    <span class="keyword">var</span> scrollTop = <span class="built_in">document</span>.documentElement.scrollTop || <span class="built_in">document</span>.body.scrollTop;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"滚动距离"</span> + dis);</span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">     <span class="keyword">var</span> dis=$(<span class="built_in">document</span>).height() - $(<span class="keyword">this</span>).scrollTop() - $(<span class="keyword">this</span>).height()</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">"距底部"</span> + dis);</span><br><span class="line">&#125;)</span><br><span class="line">$(<span class="built_in">window</span>).scroll(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">var</span> distance=$(<span class="string">'#main'</span>).offset().top-$(<span class="built_in">window</span>).scrollTop()</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"距离div顶部"</span> + distance);</span><br><span class="line">        &#125;)</span><br></pre></td></tr></table></figure></p><p>前两种都是获取滚动的距离，第三种是距离window底部的位置（最重要），而最后一种是当前顶部和#mian div顶部的距离（偏移值，可正可负）</p><p>第三种就是进行ajax分割的响应函数，大家在使用前最后自己打印距离测试一下，第四种也需要强调一下：我曾经在react中尝试对滚轮操作作出响应，试了几种之后只有这种可用、也非常灵活。</p><p>以上就是常用的四种scroll的操作了。下一阶段我将研究图片懒加载的实现</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;在浏览一些社交网站、内容网站时，我们经常发现当滚轮马上就要拉到屏幕地下是的时候，浏览器会自动为你追加内容，追加的内容怎么都追加不完。&lt;/p&gt;
&lt;p&gt;可谓深受其害，在找工作的时候，我时常希望能查看网站最底下的公司地址、证书号或点击”加入我们”，结果就是不让我看到这些内容，，，
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>关于diy项目的亮点、解决方案、难点的备注</title>
    <link href="http://fendicloser.top/2019/04/11/%E5%85%B3%E4%BA%8Ediy%E9%A1%B9%E7%9B%AE%E7%9A%84%E4%BA%AE%E7%82%B9%E3%80%81%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88%E3%80%81%E9%9A%BE%E7%82%B9%E7%9A%84%E5%A4%87%E6%B3%A8/"/>
    <id>http://fendicloser.top/2019/04/11/关于diy项目的亮点、解决方案、难点的备注/</id>
    <published>2019-04-11T01:04:14.000Z</published>
    <updated>2019-04-11T01:04:56.971Z</updated>
    
    <content type="html"><![CDATA[<p></p><h1>read ME</h1><p></p><ol><br>    <li>readme，把所有用到的问题、解决方案、一些技术上的亮点放在写在readme.html这个文件内，通过ajax得到</li><br>    <li>这个项目是我的硕士时期的重构项目，当时也是一个类似”大众点评”的项目，给了我很多灵感，也是最终让我走上前端这条路的项目</li><br>    <li>后端：epxress，数据库用的是mysql，实际我也有用mongodb的能力，数据库存放的都是基本数据类型，毕竟在自己电脑上搭建服务器，不舍得放太多图片、二进制内容到数据库中</li><br>    <li>session: 尽量少的用cookie，全栈开发用的session来保存用户的登陆状态</li><br>    <li>reactJS:因为这个项目是我个人学习、为找工作所准备的项目，把最复杂的页面用react来写了，实际上完全没要必要，在线引入了react的依赖，造成连接速度非常慢，但是react确实解决了很多问题，也达到了我”炫技”的目的</li><br>    <li>百度地图：在好几个页面用到了百度地图的api，包括地点标注、路线、导航</li><br>    <li>video：用promise实现的h5实时调用摄像头，点击发布后可以同时把拍摄的照片保存到，最多拍摄两张照片，并最终存放最后拍摄的两张照片，符合用户的使用习惯</li><br>    <li>websocket:在饭店详情页面开启对话框，用websocket实现顾客们实时通信，</li><br>    <li>饭店的详情元素中显示评价，评价的列表中可以显示文本信息和图片</li><br>    <li>视差滚动：主页面用的是视差滚动，重构了一个github上非常著名的前端项目，刚做出来的时候觉得非常酷炫，但是后来视差背景逐渐被内容遮盖了</li><br>    <li>在selectAll的渲染时，如果饭店的名字的长度大于12，截取，以。。。代替，</li><br>    <li>详情页面react，下面的画廊是动态生成的，点击任意一个照片的缩略图后再上面就会显示相应的详细图</li><br>    <li>六角形评分：用css做的六角形，实质是两个三角形重叠在一起，其实有很多刚好的解决方案，但这里为了联系css。五个六角形属于同一个class，鼠标移动到任意一个六角形上后该六角形会变成红色，点击红色的六角形会变成红色，点击评论的时候会先遍历整个类，统计一共几个红色的六角形，发给后台</li><br>    <li>restaurant_main：模仿抖音的pc端页面以全屏gif作为背景图</li><br>    <li>restaurant_add:页面模仿apple，以简单的表单、动画和固定的图片背景为主</li><br>    <li>在restaurant_add页面，老板可以上传图片到服务器，最多可以上传三张图，三张图放在本地项目的image文件夹下。<br>        实现这个功能前端需要：首先，《form》中要设置enctype=”multipart/form-data”，第二：选择文件的input标签需要加上multiple属性，<br>        第二，后端需要用到一个插件叫formidable，<br>        最终的效果是把照片存在项目文件夹下，然后把图片的位置存在数据库中<br>    </li><br>    <li><br>        居中对其方式：<br>        vertical-align：<br>        适用于：1 表格中 取值top/middle/bottom<br>        2，图片与两边文字的垂直对其方式（给img用），取值：top/middle/bottom/baseline<br>    </li><br></ol>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;/p&gt;&lt;h1&gt;read ME&lt;/h1&gt;&lt;p&gt;&lt;/p&gt;
&lt;ol&gt;&lt;br&gt;    &lt;li&gt;readme，把所有用到的问题、解决方案、一些技术上的亮点放在写在readme.html这个文件内，通过ajax得到&lt;/li&gt;&lt;br&gt;    &lt;li&gt;这个项目是我的硕士时期的重构项目，当
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>express-session保存用户登陆状态</title>
    <link href="http://fendicloser.top/2019/04/08/express-session%E4%BF%9D%E5%AD%98%E7%94%A8%E6%88%B7%E7%99%BB%E9%99%86%E7%8A%B6%E6%80%81/"/>
    <id>http://fendicloser.top/2019/04/08/express-session保存用户登陆状态/</id>
    <published>2019-04-08T11:50:58.000Z</published>
    <updated>2019-04-08T12:32:56.265Z</updated>
    
    <content type="html"><![CDATA[<p>对seesion和cookie的使用是web开发中非常重要的操作，在初学web开发时，程序员都会有这样的疑问，如何让自己的网站记住一个用户的登陆状态？ 登陆的信息应该存在前端还是后台？session和cookie有什么关系。这种疑问应该在学习完html/css/js dom操作/服务器搭建以及ajax后受到重视。<br>也就是说，想要弄清seesion和cookie你应该具备上述的基本知识。正如一位前辈所说，前端应该以全栈工程师的身份进行学习和思考。</p><p>本篇blog将解释如何用express-session存储用户登陆信息、在页面间传递；搭建最最基础的express全栈框架。<br>本blog想实现的效果是（截图怕说不明白，还是口述把）：在/user_login.html中输入用户名：”user”和密码”123”，以此模拟查找数据库的操作，如果服务器收到的信息正确，则跳转到welcome.html。在这个页面中可以渲染出用户名，并且有个”登出”按钮，点击后删除session中的数据。<br>文件的目录文件如下：<br><img src="/2019/04/08/express-session保存用户登陆状态/1.png" alt><br>非常的简单，对node感到陌生的同学也可以通过本片blog学习一下如何创建一个全栈项目，在此基础上加上数据库控制就是”完美了”。</p><p>首先是package.json：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"tryajax2trysession"</span>,</span><br><span class="line">  <span class="string">"version"</span>: <span class="string">"1.0.0"</span>,</span><br><span class="line">  <span class="string">"description"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"main"</span>: <span class="string">"index.js"</span>,</span><br><span class="line">  <span class="string">"scripts"</span>: &#123;</span><br><span class="line">    <span class="string">"start"</span>: <span class="string">"node ./app.js"</span>,</span><br><span class="line">    <span class="string">"test"</span>: <span class="string">"echo \"Error: no test specified\" &amp;&amp; exit 1"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="string">"author"</span>: <span class="string">""</span>,</span><br><span class="line">  <span class="string">"license"</span>: <span class="string">"ISC"</span>,</span><br><span class="line">  <span class="string">"dependencies"</span>: &#123;</span><br><span class="line">    <span class="string">"body-parser"</span>: <span class="string">"^1.18.3"</span>,</span><br><span class="line">    <span class="string">"express"</span>: <span class="string">"^4.16.4"</span>,</span><br><span class="line">    <span class="string">"express-session"</span>: <span class="string">"^1.15.6"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>根据dependencies自行npm install一下。版本基本没什么问题。</p><h4 id="app-js文件，"><a href="#app-js文件，" class="headerlink" title="app.js文件，"></a>app.js文件，</h4><p>把session配置在这里，引入路由器和静态文件<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> session=<span class="built_in">require</span>(<span class="string">'express-session'</span>)</span><br><span class="line"><span class="keyword">var</span> userRouter=<span class="built_in">require</span>(<span class="string">'./router/users'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">app.use(express.static(<span class="string">'public'</span>))</span><br><span class="line">app.use(express.static(<span class="string">'public/view'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> idKey=<span class="string">'skey'</span></span><br><span class="line">app.use(session(&#123;</span><br><span class="line">    name:idKey,</span><br><span class="line">    secret:<span class="string">'fendicloser'</span>,</span><br><span class="line">    resave:<span class="literal">true</span>,<span class="comment">//是否自动保存未自动保存初始化的对话，</span></span><br><span class="line">    saveUninitialized:<span class="literal">true</span>,</span><br><span class="line">    cookie:&#123;</span><br><span class="line">        maxAge:<span class="number">30</span>*<span class="number">60</span>*<span class="number">1000</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;))</span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br></pre></td></tr></table></figure></p><p>cookie中设置过期时间，以毫秒为单位，这里根据大部分网站的习惯设置为30分钟。<br>resave和saveUninitialized是需要设置的，否则使用过程中可能出现限制，</p><h6 id="resave："><a href="#resave：" class="headerlink" title="resave："></a>resave：</h6><p>是否允许session重新设置</p><h6 id="saveUninitialized："><a href="#saveUninitialized：" class="headerlink" title="saveUninitialized："></a>saveUninitialized：</h6><p>是否允许session在使用过程中被修改。</p><h4 id="路由器-router-users-js"><a href="#路由器-router-users-js" class="headerlink" title="路由器./router/users.js"></a>路由器./router/users.js</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> router=express.Router()</span><br><span class="line"><span class="keyword">var</span> bodyParser=<span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">router.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br><span class="line">router.post(<span class="string">'/login'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.body)</span><br><span class="line">    <span class="keyword">if</span>(req.body.userNickName==<span class="string">'user'</span>&amp;&amp;req.body.userPassowrd==<span class="string">'123'</span>)&#123;</span><br><span class="line">        req.session.userNickName=req.body.userNickName</span><br><span class="line">        res.json([&#123;<span class="string">'code'</span>:<span class="string">'200'</span>,<span class="string">'text'</span>:<span class="string">'login success'</span>&#125;])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        res.json([&#123;<span class="string">'code'</span>:<span class="string">'201'</span>,<span class="string">'text'</span>:<span class="string">'login failed'</span>&#125;])</span><br><span class="line">&#125;)</span><br><span class="line">router.get(<span class="string">'/welcome'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(req.session.userNickName)&#123;</span><br><span class="line">        res.send([&#123;<span class="string">'code'</span>:<span class="string">'200'</span>,<span class="string">'userNickName'</span>:req.session.userNickName&#125;])</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">        res.send([&#123;<span class="string">'code'</span>:<span class="string">'201'</span>,<span class="string">'userNickName'</span>:<span class="string">'not login yet'</span>&#125;])</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line">router.post(<span class="string">'/logout'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    req.session.userNickName=<span class="literal">null</span></span><br><span class="line">    res.json([&#123;<span class="string">'code'</span>:<span class="string">'200'</span>,<span class="string">'text'</span>:<span class="string">'logout success'</span>&#125;])</span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports=router</span><br></pre></td></tr></table></figure><p>一个三个接口，登陆一个，跳转是访问一个，登出一个，最最关键的一句话是req.session.userNickName=req.body.userNickName。</p><p>在/login中设置了req.session,userNickName但是在此之后任何一个路由中console.log（req.session）你都看不到userNickName的相关数据。当初使用以为访问不到，耽误了很长时间，知道真相的我眼泪流下来<br>。<br>登出时，<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">req.session.userNickName=<span class="literal">null</span></span><br></pre></td></tr></table></figure></p><h4 id="登陆页面public-view-user-login-html"><a href="#登陆页面public-view-user-login-html" class="headerlink" title="登陆页面public/view/user_login.html"></a>登陆页面public/view/user_login.html</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;title&gt;Title&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script src="http:/</span><span class="regexp">/libs.baidu.com/</span>jquery/<span class="number">2.1</span><span class="number">.4</span>/jquery.min.js<span class="string">"&gt;&lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;script type="</span>text/javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        function sendAjaxQuery(url, data) &#123;</span></span><br><span class="line"><span class="string">            $.ajax(&#123;</span></span><br><span class="line"><span class="string">                url: url ,</span></span><br><span class="line"><span class="string">                data: data,</span></span><br><span class="line"><span class="string">                dataType: 'json',</span></span><br><span class="line"><span class="string">                type: 'POST',</span></span><br><span class="line"><span class="string">                xhrFields: &#123;</span></span><br><span class="line"><span class="string">                    withCredentials: true</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                success: function (dataR) &#123;</span></span><br><span class="line"><span class="string">                    var ret = dataR;</span></span><br><span class="line"><span class="string">                    if(ret[0].code==200)&#123;</span></span><br><span class="line"><span class="string">                        window.location.href='/welcome.html'</span></span><br><span class="line"><span class="string">                    &#125;else&#123;</span></span><br><span class="line"><span class="string">                        alert('登陆失败，请重试')</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                error: function (xhr, status, error) &#123;</span></span><br><span class="line"><span class="string">                    alert('Error: ' + error.message);</span></span><br><span class="line"><span class="string">                &#125;</span></span><br><span class="line"><span class="string">            &#125;);</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">        function onSubmit() &#123;</span></span><br><span class="line"><span class="string">            var formArray= $("</span>form<span class="string">").serializeArray();</span></span><br><span class="line"><span class="string">            var data=&#123;&#125;;</span></span><br><span class="line"><span class="string">            for (var i=0;i&lt;formArray.length;i++)&#123;</span></span><br><span class="line"><span class="string">                data[formArray[i].name]= formArray[i].value;</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">            sendAjaxQuery('/user/login', $.param(data));</span></span><br><span class="line"><span class="string">            event.preventDefault();</span></span><br><span class="line"><span class="string">        &#125;</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string">&lt;form id=“xForm"</span> onsubmit=<span class="string">"onSubmit()"</span>&gt;</span><br><span class="line">    &lt;p&gt;</span><br><span class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"userNickName"</span> placeholder=<span class="string">"userNickName"</span>/&gt;</span><br><span class="line">    &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input type="text" name ="userPassowrd" placeholder="userPassowrd"/</span>&gt;</span><br><span class="line">    &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">    &lt;p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;input type="submit" name="g" value="Submit" id="g"&gt;</span></span><br><span class="line"><span class="regexp">    &lt;/</span>p&gt;</span><br><span class="line">&lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>body&gt;</span><br><span class="line">&lt;<span class="regexp">/html&gt;</span></span><br></pre></td></tr></table></figure><p>ajax里的<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">xhrFields: &#123;</span><br><span class="line">     withCredentials: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></p><p> 是设置凭证用的，当跨域想带上cookie的时候，需要设置认证。</p><h4 id="目标页面public-view-welcome-html"><a href="#目标页面public-view-welcome-html" class="headerlink" title="目标页面public/view/welcome.html"></a>目标页面public/view/welcome.html</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">"en"</span>&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;meta charset=<span class="string">"UTF-8"</span>&gt;</span><br><span class="line">    &lt;script src=<span class="string">"http://libs.baidu.com/jquery/2.1.4/jquery.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line">    &lt;title&gt;Title&lt;<span class="regexp">/title&gt;</span></span><br><span class="line"><span class="regexp">    &lt;script type="text/</span>javascript<span class="string">"&gt;</span></span><br><span class="line"><span class="string">        $(document).ready(function()&#123;</span></span><br><span class="line"><span class="string">            $.ajax(&#123;</span></span><br><span class="line"><span class="string">                url:'/user/welcome',</span></span><br><span class="line"><span class="string">                data: '',</span></span><br><span class="line"><span class="string">                type: 'GET',</span></span><br><span class="line"><span class="string">                dataType: 'json',</span></span><br><span class="line"><span class="string">                xhrFields: &#123;</span></span><br><span class="line"><span class="string">                    withCredentials: true</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                success: function (dataR) &#123;</span></span><br><span class="line"><span class="string">                    if(dataR[0].code=='200')&#123;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                        $('#userArea').html('! '+dataR[0].userNickName)</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                    else&#123;</span></span><br><span class="line"><span class="string">                        $('#userArea').html(',  login please')</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string">                error: function (xhr, status, error) &#123;</span></span><br><span class="line"><span class="string">                    alert('Error: ' + error.message);</span></span><br><span class="line"><span class="string">                &#125;,</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">            $('#logout').click(function () &#123;</span></span><br><span class="line"><span class="string">                $.ajax(&#123;</span></span><br><span class="line"><span class="string">                    url:'/user/logout',</span></span><br><span class="line"><span class="string">                    data:'',</span></span><br><span class="line"><span class="string">                    type:'POST',</span></span><br><span class="line"><span class="string">                    dataType: 'json',</span></span><br><span class="line"><span class="string">                    xhrFields: &#123;</span></span><br><span class="line"><span class="string">                        withCredentials:true</span></span><br><span class="line"><span class="string">                    &#125;,</span></span><br><span class="line"><span class="string">                    success:function (dataR) &#123;</span></span><br><span class="line"><span class="string">                        console.log('登出成功')</span></span><br><span class="line"><span class="string">                        window.location.href='/welcome.html'</span></span><br><span class="line"><span class="string">                    &#125;,</span></span><br><span class="line"><span class="string">                    error:function(xhr,status,error)&#123;</span></span><br><span class="line"><span class="string">                        alert('Error: '+error.message)</span></span><br><span class="line"><span class="string">                    &#125;</span></span><br><span class="line"><span class="string">                &#125;)</span></span><br><span class="line"><span class="string">            &#125;)</span></span><br><span class="line"><span class="string">        &#125;)</span></span><br><span class="line"><span class="string">    &lt;/script&gt;</span></span><br><span class="line"><span class="string">&lt;/head&gt;</span></span><br><span class="line"><span class="string">&lt;body&gt;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">&lt;div id="</span>welcome<span class="string">"&gt;</span></span><br><span class="line"><span class="string">    welcome&lt;span id="</span>userArea<span class="string">"&gt;&lt;/span&gt;</span></span><br><span class="line"><span class="string">&lt;/div&gt;</span></span><br><span class="line"><span class="string">&lt;button id="</span>logout<span class="string">"&gt;登出&lt;/button&gt;</span></span><br><span class="line"><span class="string">&lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure><p>上述就是全部过程了，非常简单。别写的过程自然不是一个个文件加从上到下顺着敲出来的，希望同学在复制粘贴成功运行后自己读读程序理解一下。</p><p>最后的最后多说两点：</p><h6 id="1自己需要弄明白的下一个问题是：如何把一个reactJS项目修改成一个react-express项目：代理？修改react-script的源码？用github上已有的脚手架？"><a href="#1自己需要弄明白的下一个问题是：如何把一个reactJS项目修改成一个react-express项目：代理？修改react-script的源码？用github上已有的脚手架？" class="headerlink" title="1自己需要弄明白的下一个问题是：如何把一个reactJS项目修改成一个react-express项目：代理？修改react-script的源码？用github上已有的脚手架？"></a>1自己需要弄明白的下一个问题是：如何把一个reactJS项目修改成一个react-express项目：代理？修改react-script的源码？用github上已有的脚手架？</h6><h6 id="2jquery虽然正在被人诟病，但是它的ajax还是比原生好太多了，res-json？-res-render？-res-send？"><a href="#2jquery虽然正在被人诟病，但是它的ajax还是比原生好太多了，res-json？-res-render？-res-send？" class="headerlink" title="2jquery虽然正在被人诟病，但是它的ajax还是比原生好太多了，res.json？ res.render？ res.send？"></a>2jquery虽然正在被人诟病，但是它的ajax还是比原生好太多了，res.json？ res.render？ res.send？</h6>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;对seesion和cookie的使用是web开发中非常重要的操作，在初学web开发时，程序员都会有这样的疑问，如何让自己的网站记住一个用户的登陆状态？ 登陆的信息应该存在前端还是后台？session和cookie有什么关系。这种疑问应该在学习完html/css/js dom
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>js、node.js前后端表单、ajax的最基础demo（四种请求方式）</title>
    <link href="http://fendicloser.top/2019/04/01/js%E3%80%81node-js%E5%89%8D%E5%90%8E%E7%AB%AF%E8%A1%A8%E5%8D%95%E3%80%81ajax%E7%9A%84%E6%9C%80%E5%9F%BA%E7%A1%80demo%EF%BC%88%E5%9B%9B%E7%A7%8D%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F%EF%BC%89/"/>
    <id>http://fendicloser.top/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/</id>
    <published>2019-04-01T01:11:39.000Z</published>
    <updated>2019-04-01T04:53:30.847Z</updated>
    
    <content type="html"><![CDATA[<p>阅读本片blog之前希望你：</p><h6 id="知道html-js的基本写法，"><a href="#知道html-js的基本写法，" class="headerlink" title="知道html/js的基本写法，"></a>知道html/js的基本写法，</h6><h6 id="知道npm的基本用法，知道一个前端项目最基本的要素。"><a href="#知道npm的基本用法，知道一个前端项目最基本的要素。" class="headerlink" title="知道npm的基本用法，知道一个前端项目最基本的要素。"></a>知道npm的基本用法，知道一个前端项目最基本的要素。</h6><h6 id="有最基础的node和mysql（或其他非关系数据库）知识"><a href="#有最基础的node和mysql（或其他非关系数据库）知识" class="headerlink" title="有最基础的node和mysql（或其他非关系数据库）知识"></a>有最基础的node和mysql（或其他非关系数据库）知识</h6><h6 id="听说过ajax"><a href="#听说过ajax" class="headerlink" title="听说过ajax"></a>听说过ajax</h6><p>仅此而已，如果没有，知识单纯的听说过ajax。也可以进来看看。其实这片文章的内容，属于一个计算机科学专业的本科生毕业时的必备知识。但是个人在接受教育时发现其实现在的本科教育和互联网行业的需求已经严重脱节，很多毕业生根本没听说过ajax（不论是不是前端方向）。听说过的也仅仅是为了应付面试死记硬背而已。<br>fendicloser<br>/Users/fendicloser/tedu/code/html/day05/try</p><h3 id="搭建服务器"><a href="#搭建服务器" class="headerlink" title="搭建服务器"></a>搭建服务器</h3><p>新建一个文件夹，导入node——module，文件夹中最少包含express和一个数据库的接口模块，<br>新建app.js作为入口文件。</p><p>进入文件夹终端，输入npm init 可以一直回车键，最后yes，会生成package.json, 在这个文件夹中找的script，输入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">”start<span class="string">": "</span>node ./app.js<span class="string">",</span></span><br></pre></td></tr></table></figure></p><p>在app中：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br></pre></td></tr></table></figure></p><p>然后新建pool.js 作为数据库连接池连接池。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql=<span class="built_in">require</span>(<span class="string">'mysql'</span>)</span><br><span class="line"><span class="keyword">var</span> pool=mysql.createPool(&#123;</span><br><span class="line">    host:<span class="string">'127.0.0.1'</span>,</span><br><span class="line">    port:<span class="string">'3306'</span>,</span><br><span class="line">    user:<span class="string">'root'</span>,</span><br><span class="line">    password:<span class="string">'Aptx4869'</span>,</span><br><span class="line">    database:<span class="string">'xz'</span>,          <span class="comment">//连接到的数据库</span></span><br><span class="line">    connectionLimit:<span class="string">'15'</span>,<span class="comment">//连接池最大连接数</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports=pool</span><br></pre></td></tr></table></figure></p><p>然后开始写接口，路由器，在项目下心间router文件夹，在该文件夹下创建user.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express =<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="comment">//创建路由器对象</span></span><br><span class="line"><span class="keyword">var</span> userRouter=express.Router()</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入连接池、还有querystring和body-parser</span></span><br><span class="line"><span class="comment">//这两个是路由中经常使用到的模块，用来处理数据，</span></span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"><span class="keyword">var</span> bodyParser=<span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"><span class="keyword">var</span> pool=<span class="built_in">require</span>(<span class="string">'../pool'</span>);</span><br><span class="line"><span class="comment">//use bodyParser中间件，这样在post中就可以使用req.body了</span></span><br><span class="line">router.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br><span class="line"><span class="built_in">module</span>.exports=router</span><br></pre></td></tr></table></figure></p><p>在app.js中引入刚刚创建好的路由器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userRouter=<span class="built_in">require</span>(<span class="string">'./router/user'</span>)</span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br></pre></td></tr></table></figure></p><p>在项目下创建public文件夹，用来存放静态文件，在public下创建view文件夹用来存放html文件，把public托管到app.js中</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">'public'</span>))</span><br><span class="line"><span class="comment">//如果不添加这一句，需要输入http://localhost:8080/view/user.html</span></span><br><span class="line"><span class="comment">//如果添加里，只需要输入http://localhost:8080/user.html</span></span><br><span class="line">app.use(express.static(<span class="string">'public/view'</span>))</span><br></pre></td></tr></table></figure><p>此时的的完整app.js是：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="keyword">var</span> userRouter=<span class="built_in">require</span>(<span class="string">'./router/user'</span>)</span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br><span class="line">app.use(express.static(<span class="string">'public'</span>))</span><br><span class="line">app.use(express.static(<span class="string">'public/view'</span>))</span><br></pre></td></tr></table></figure></p><p>做完这一步，服务器就基本搭好了，我们就可以开始写第一个表单了</p><h3 id="form表单的get请求"><a href="#form表单的get请求" class="headerlink" title="form表单的get请求"></a>form表单的get请求</h3><p>紧接着上面已有的代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">"get"</span> action=<span class="string">"/user/add"</span>&gt;</span><br><span class="line">    用户：&lt;input type=<span class="string">"text"</span> name=<span class="string">"uname"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    密码：&lt;input type=<span class="string">"text"</span> name=<span class="string">"upwd"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    邮箱：&lt;input type=<span class="string">"text"</span> name=<span class="string">"email"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    手机：&lt;input type=<span class="string">"text"</span> name=<span class="string">"phone"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure></p><p>在user.js中写响应的路由</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userRouter.get(<span class="string">'/add'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.send(req.query)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/1.jpeg" alt><br><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/2.jpeg" alt></p><h3 id="form的post"><a href="#form的post" class="headerlink" title="form的post"></a>form的post</h3><p>完成这一步，我们在同一个html文件中再创建一个post表单，格式一摸一样，只有method和action发生了变化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">"post"</span> action=<span class="string">"/user/addPost"</span>&gt;</span><br><span class="line">    用户：&lt;input type=<span class="string">"text"</span> name=<span class="string">"uname"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    密码：&lt;input type=<span class="string">"text"</span> name=<span class="string">"upwd"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    邮箱：&lt;input type=<span class="string">"text"</span> name=<span class="string">"email"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    手机：&lt;input type=<span class="string">"text"</span> name=<span class="string">"phone"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure></p><p>然后是路由，这一次我们把数据库也加上，但是这里我懒得新创建一个新的数据库数数据表，所以执行查操作<br><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/3.jpeg" alt><br>目标是uname输入dingding，查到的数据是这一行。<br>所以接口的写法是：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">userRouter.post(<span class="string">'/addPost'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num=<span class="number">400</span></span><br><span class="line">    <span class="keyword">var</span> obj=req.body</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> req.body)&#123;</span><br><span class="line">        num=num+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(!req.body[index])&#123;</span><br><span class="line">            res.send(&#123;<span class="attr">code</span>:num,<span class="attr">msg</span>:index+<span class="string">'  required'</span>&#125;)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    pool.query(<span class="string">'select * from xz_user where uname=?'</span>,[obj.uname],<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!err)&#123;</span><br><span class="line">            res.send(result)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">throw</span> err</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/4.jpeg" alt><br><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/5.jpeg" alt></p><h3 id="Ajax的get"><a href="#Ajax的get" class="headerlink" title="Ajax的get"></a>Ajax的get</h3><p>下一步是ajax的进行get的写法,  ajax对前端的意义不必多说，它不仅仅只有“不需要加载整个完整页面”这一个优势。<br>前端页面<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;input id=<span class="string">"tryAjax"</span> type=<span class="string">"text"</span> /&gt;</span><br><span class="line">    &lt;button onclick=<span class="string">"tryAjaxFunc()"</span>&gt;ajax&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div id="result"&gt;&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    function tryAjaxFunc() &#123;</span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp">        var tryAjax=document.getElementById('tryAjax')</span></span><br><span class="line"><span class="regexp">        var xhr</span></span><br><span class="line"><span class="regexp">        if(window.XMLHttpRequest)&#123;xhr=new window.XMLHttpRequest()&#125;</span></span><br><span class="line"><span class="regexp">        else&#123;xhr=new ActiveXObject('Microsoft.XMLHTTP')&#125;</span></span><br><span class="line"><span class="regexp">        var url='/u</span>ser/ajaxRouter<span class="string">'+'</span>?tryAjax=<span class="string">'+tryAjax.value</span></span><br><span class="line"><span class="string">        xhr.open('</span><span class="keyword">get</span>',url,true)</span><br><span class="line">        xhr.send()</span><br><span class="line">        xhr.onreadystatechange=function () &#123;</span><br><span class="line">            <span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp;xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">                result.innerHTML=xhr.responseText</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><p>后台路由的写法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userRouter.get(<span class="string">'/ajaxRouter'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.send(req.query)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>Get的写法，非常简单，url就夹带着请求的内容，<br>原生ajax的写法也是面试时会被问到的高频问题，说一下这一句，这是兼容ie8的写法，但是2018年以后，淘宝、Twitter等大型网站已经开始陆续不做ie8的兼容了，所以慢慢的，这句话可以不写了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span>&#123;xhr=<span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>)&#125;</span><br></pre></td></tr></table></figure></p><p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/6.jpeg" alt></p><h3 id="ajax的post"><a href="#ajax的post" class="headerlink" title="ajax的post"></a>ajax的post</h3><p>一定要注意，setRequestHeader一定要放在open和send中间，否则会报错！！content-type虽然很长，但是一定要记住：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;input id=<span class="string">"tryAjaxPost1"</span> type=<span class="string">"text"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line">    &lt;input id="tryAjaxPost2" type="text"&gt;&lt;br&gt;</span><br><span class="line">    &lt;button onclick="tryAjaxPost()"&gt;ajax post&lt;/button&gt;</span><br><span class="line">    &lt;div id="resultPost"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script type="text/javascript"&gt;</span><br><span class="line">   tryAjaxPost=function () &#123;</span><br><span class="line">        var xhr</span><br><span class="line">        if(window.XMLHttpRequest)&#123;xhr=new window.XMLHttpRequest()&#125;</span><br><span class="line">        else xhr=new ActiveXObject('Microsoft.XMLHTTP')</span><br><span class="line">        xhr.open('post','/user/ajaxRouterPost',true)</span><br><span class="line">        var formdata='tryAjaxPost1='+tryAjaxPost1.value+'&amp;tryAjaxPost2='+tryAjaxPost2.value</span><br><span class="line">        xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')</span><br><span class="line">        xhr.send(formdata)</span><br><span class="line">        xhr.onreadystatechange=function () &#123;</span><br><span class="line">            if(xhr.readyState==4&amp;&amp;xhr.status==200)&#123;</span><br><span class="line">                resultPost.innerHTML=xhr.responseText</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>后台没有任何的变化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userRouter.post(<span class="string">'/ajaxRouterPost'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.send(req.body)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/7.jpg" alt></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;阅读本片blog之前希望你：&lt;/p&gt;
&lt;h6 id=&quot;知道html-js的基本写法，&quot;&gt;&lt;a href=&quot;#知道html-js的基本写法，&quot; class=&quot;headerlink&quot; title=&quot;知道html/js的基本写法，&quot;&gt;&lt;/a&gt;知道html/js的基本写法，&lt;/h6
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>express路由</title>
    <link href="http://fendicloser.top/2019/03/20/express%E8%B7%AF%E7%94%B1/"/>
    <id>http://fendicloser.top/2019/03/20/express路由/</id>
    <published>2019-03-20T12:21:54.000Z</published>
    <updated>2019-03-20T12:46:51.863Z</updated>
    
    <content type="html"><![CDATA[<p>intellij或webstrom是非常非常适合前端开发的编译器，在编译器里，当我们搭建好node开发环境，express框架的雏形就已经摆在我们面前了。这其实很不利于初学者真正搞懂什么是路由、以及express搭建服务器的原理。</p><p>所以今天，我带来一些对express路由的理解和基础：</p><p>网络编程中最最基础的两个问题：</p><h3 id="get和post的区别："><a href="#get和post的区别：" class="headerlink" title="get和post的区别："></a>get和post的区别：</h3><h5 id="我的理解是："><a href="#我的理解是：" class="headerlink" title="我的理解是："></a>我的理解是：</h5><h5 id="get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全"><a href="#get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全" class="headerlink" title="get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全"></a>get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全</h5><h5 id="get的速度比较快"><a href="#get的速度比较快" class="headerlink" title="get的速度比较快"></a>get的速度比较快</h5><h5 id="用户注册、登录等操作需要用post’"><a href="#用户注册、登录等操作需要用post’" class="headerlink" title="用户注册、登录等操作需要用post’"></a>用户注册、登录等操作需要用post’</h5><h5 id="查询字符串、搜索项品等没有安全要求的操作用get’"><a href="#查询字符串、搜索项品等没有安全要求的操作用get’" class="headerlink" title="查询字符串、搜索项品等没有安全要求的操作用get’"></a>查询字符串、搜索项品等没有安全要求的操作用get’</h5><h3 id="1-路由："><a href="#1-路由：" class="headerlink" title="1.路由："></a>1.路由：</h3><p>浏览器向web服务器发请求，web服务器根据请求的方法和请求的url做出响应,路由的三要素：请求的方法、请求的url、响应（回调函数）</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/引入第三方模块</span><br><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">var</span> app   = express();</span><br><span class="line"><span class="comment">//监听湍口</span></span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="comment">//請求的方法是get，請求的url是/list </span></span><br><span class="line">app.get(<span class="string">'/list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.method,req.url)</span><br><span class="line">    <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">    <span class="comment">//获取查询字符创中的数据=》将url中查询字符串转成对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(req.query)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这个时候，假设url为：</p><h3 id="http-localhost-8080-list-lid-longfuSun-amp-age-99"><a href="#http-localhost-8080-list-lid-longfuSun-amp-age-99" class="headerlink" title="http://localhost:8080/list?lid=longfuSun&amp;age=99"></a><a href="http://localhost:8080/list?lid=longfuSun&amp;age=99" target="_blank" rel="noopener">http://localhost:8080/list?lid=longfuSun&amp;age=99</a></h3><p>最后就会返回：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;lid：lonfuSun, age：<span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure><p>关于req和res两个参数：</p><table border="1"><br><tr><th>请求（req）的对象：</th><th>含义</th></tr><tr><td>req.method</td><td></td> </tr><tr><td>req.url</td><td></td></tr><tr><td>req.headers</td><td></td></tr><tr><td>req.query</td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table><p>animation-iteration-count</p><table border="1"><br><tr><th>响应（res）的对象</th><th>含义</th></tr><tr><td>res.send（）</td><td>响应内容并发送，不能多次使用，如果是数字，需要转化成字符串</td> </tr><tr><td>res.sendStatus（）</td><td> 响应状态码对应的中文200-》ok</td></tr><tr><td>res.sendFile</td><td>res.sendFile（__dirname+’/‘+’文件的相对路径’）响应的重定向</td></tr><td></td></table><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入第三方模块</span></span><br><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">var</span> app   = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听湍口</span></span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="comment">//請求的方法是get，請求的url是/list </span></span><br><span class="line">app.get(<span class="string">'/list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//res.send('&lt;h1&gt;这是商品的列表&lt;/h1&gt;')</span></span><br><span class="line"><span class="comment">//send只能发送一次，</span></span><br><span class="line">    <span class="comment">//响应文件并发送</span></span><br><span class="line">    <span class="comment">//如果这样会报错：</span></span><br><span class="line">    <span class="comment">//res.sendFile('./list.html') </span></span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/list.html'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//响应的重定向</span></span><br><span class="line">    res.redirect(<span class="string">'http://www.tmooc.cn'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="POST请求："><a href="#POST请求：" class="headerlink" title="POST请求："></a>POST请求：</h3><p>通过表单提交传递数据（现阶段）服务器端通过事件获取数据后期可以使用插件简化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">'/mylogin'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//获取post请求的数据</span></span><br><span class="line">    req.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">buf</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//decodeURI(str)</span></span><br><span class="line">        <span class="keyword">var</span> obj=querystring.parse(<span class="built_in">decodeURI</span>(buf.toString()))</span><br><span class="line">        <span class="built_in">console</span>.log(obj)</span><br><span class="line">    &#125;)</span><br><span class="line">    res.send(<span class="string">'nihao'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">req.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">buf</span>)</span>&#123;</span><br><span class="line">buf是查询到的数据，需要通过查询字符串将其格式化成对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><h3 id="GET请求："><a href="#GET请求：" class="headerlink" title="GET请求："></a>GET请求：</h3><p>通过查询字符串（req.query）获取数据。不需要向服务器提交数据。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/reg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/reg.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/myreg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'successful, 你的用户名是： '</span>+req.query.uname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="联系"><a href="#联系" class="headerlink" title="联系"></a>联系</h3><p>post.js：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/login'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/login.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据表单的请求写对应的路由</span></span><br><span class="line"><span class="comment">//请求的方法是post 请求的url是/mylogin</span></span><br><span class="line">app.post(<span class="string">'/mylogin'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//获取post请求的数据</span></span><br><span class="line">    req.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">buf</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//decodeURI(str)</span></span><br><span class="line">        <span class="keyword">var</span> obj=querystring.parse(<span class="built_in">decodeURI</span>(buf.toString()))</span><br><span class="line">        <span class="built_in">console</span>.log(obj)</span><br><span class="line">    &#125;)</span><br><span class="line">    res.send(<span class="string">'nihao'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/reg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/reg.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/myreg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'successful, 你的用户名是： '</span>+req.query.uname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><p>login.html<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;<span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p&gt;请您注册&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;form action="/my</span>login<span class="string">" method="</span>POST<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- name ：用于设置数据的名称，用于服务器获取该数据 --&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">                &lt;br/&gt;</span></span><br><span class="line"><span class="string">                用户：</span></span><br><span class="line"><span class="string">                &lt;input id="</span>name<span class="string">" type="</span>text<span class="string">" name="</span>姓名<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;br/&gt;</span></span><br><span class="line"><span class="string">                密码：</span></span><br><span class="line"><span class="string">                &lt;input id="</span>password<span class="string">"type="</span>password<span class="string">" name="</span>password<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;br/&gt;</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;input type="</span>submit<span class="string">" name="</span>提交<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">            onsubmit=function()&#123;</span></span><br><span class="line"><span class="string">                var name=document.getElementById('name').value</span></span><br><span class="line"><span class="string">                var password=document.getElementById('password').value</span></span><br><span class="line"><span class="string">                //alert("</span>名字是:<span class="string">"+name+"</span>密码是：<span class="string">"+password)</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure></p><p>reg.html<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;<span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form method=<span class="string">"GET"</span> action=<span class="string">"/myreg"</span>&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p&gt;user name&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;input type="text" name="uname"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                    &lt;p&gt;password&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;input type="password" name="password"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p&gt;phone number&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;input type="text" name="phone number"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;input type=<span class="string">"submit"</span> name=<span class="string">"submit"</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            </span></span><br><span class="line"><span class="regexp">        &lt;/</span>form&gt;</span><br><span class="line">    &lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure></p><h3 id="用路由来传递数据"><a href="#用路由来传递数据" class="headerlink" title="用路由来传递数据"></a>用路由来传递数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用路由传递参数</span></span><br><span class="line"><span class="comment">//请求方法：get 请求的url：/detail</span></span><br><span class="line"><span class="comment">//其中的:/lid就是不同的商品的路由</span></span><br><span class="line">app.get(<span class="string">'/detail/:lid'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.params)<span class="comment">//&#123; lid: '5' &#125;</span></span><br><span class="line">    res.send(<span class="string">'商品详情detail of goods:'</span>+req.params.lid)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>练习：创建购物车的路由，请求方法是get 请求url、shopping，传递商品的价格和名称把接收的两项响应到浏览器中<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/shopping/:price/:pname'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'商品的价格是：'</span>+req.params.price+<span class="string">'商品的名称是：'</span>+req.params.pname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p><h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p>路由在使用过程中，不同模块下的路由可能出现相同的URL, 把同一个模块下的路由挂在在特定的的前缀<br>例如：</p><h5 id="用户列表：-list-商品列表：也是-list"><a href="#用户列表：-list-商品列表：也是-list" class="headerlink" title="用户列表：/list   商品列表：也是/list"></a>用户列表：/list   商品列表：也是/list</h5><h5 id="但是用户模块下的列表可以变成：-user-list"><a href="#但是用户模块下的列表可以变成：-user-list" class="headerlink" title="但是用户模块下的列表可以变成：    /user/list"></a>但是用户模块下的列表可以变成：    /user/list</h5><h5 id="商品模块下可以变成：-product-list"><a href="#商品模块下可以变成：-product-list" class="headerlink" title="商品模块下可以变成：/product/list"></a>商品模块下可以变成：/product/list</h5><p>新建js文件：<br>user.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> router=express.Router()</span><br><span class="line"><span class="comment">//往路由器中添加模块下的所有路由</span></span><br><span class="line"><span class="comment">//用户列表的路由</span></span><br><span class="line">router.get(<span class="string">'/list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'list'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/delete'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'delete'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports=router</span><br></pre></td></tr></table></figure><p>在服务器中：<br>router.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> userRouter=<span class="built_in">require</span>(<span class="string">'./user.js'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="comment">//先引入</span></span><br><span class="line"><span class="comment">//再挂载</span></span><br><span class="line"><span class="comment">//第一个是要挂载的路由器</span></span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;intellij或webstrom是非常非常适合前端开发的编译器，在编译器里，当我们搭建好node开发环境，express框架的雏形就已经摆在我们面前了。这其实很不利于初学者真正搞懂什么是路由、以及express搭建服务器的原理。&lt;/p&gt;
&lt;p&gt;所以今天，我带来一些对exp
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>css双飞翼布局、圣杯布局、动画（2）</title>
    <link href="http://fendicloser.top/2019/03/10/css%E5%8F%8C%E9%A3%9E%E7%BF%BC%E5%B8%83%E5%B1%80%E3%80%81%E5%9C%A3%E6%9D%AF%E5%B8%83%E5%B1%80%E3%80%81%E5%8A%A8%E7%94%BB%EF%BC%882%EF%BC%89/"/>
    <id>http://fendicloser.top/2019/03/10/css双飞翼布局、圣杯布局、动画（2）/</id>
    <published>2019-03-10T07:03:43.000Z</published>
    <updated>2019-03-10T13:01:45.198Z</updated>
    
    <content type="html"><![CDATA[<p>之后是动画，用最起初的css，我记得刚接触css的时候，看到有人说css是一种越用越发现它深奥的技术，看似简单其实能实现很丰富的样式。</p><p>首先看一下css动画的基本属性。</p><table border="1"><tr><th>属性名</th><th>含义</th></tr><tr><td>animation-name</td><td>规定需要绑定到选择器的 keyframe 名称。。</td> </tr><tr><td>animation-duration</td><td>规定完成动画所花费的时间，以秒或毫秒计。</td></tr><tr><td>animation-timing-function</td><td>规定动画的速度曲线。</td></tr><tr><td>animation-delay</td><td>规定在动画开始之前的延迟。</td></tr><tr><td>animation-iteration-count</td><td>规定动画应该播放的次数。</td></tr><tr><td>animation-direction</td><td>规定是否应该轮流反向播放动画。</td></tr></table><p>其中animation-timing-function的值需要注意：</p><table border="1"><tr><th>animation-timing-function值</th><th>含义</th></tr><tr><td>linear</td><td>动画从头到尾的速度是相同的。</td> </tr><tr><td>ease</td><td>默认。动画以低速开始，然后加快，在结束前变慢</td></tr><tr><td>ease-in</td><td>动画以低速开始。</td></tr><tr><td>ease-out</td><td>动画以低速结束。</td></tr><tr><td>ease-in-out</td><td>动画以低速开始和结束</td></tr><tr><td>cubic-bezier(n,n,n,n)</td><td>自定义。在 cubic-bezier 函数中自己的值。可能的值是从 0 到 1 的数值。</td></tr></table><p>animation-iteration-count</p><table border="1"><tr><th>animation-iteration-count的值</th><th>含义</th></tr><tr><td>n</td><td>定义动画播放次数的数值。</td></tr><tr><td>infinite</td><td>规定动画应该无限次播放。</td></tr></table><br>animation-direction的值<br><table border="1"><tr><th>animation-direction的值</th><th>含义</th></tr><tr> <td>normal</td><td>默认值。动画应该正常播放。</td></tr><tr><td>alternate</td><td>动画应该轮流反向播放。</td></tr></table><p>实现第一种loading动画的方式特别简单：<br>首先是HTML:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"loading"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>然后是css<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">@keyframes loading1&#123;</span><br><span class="line"><span class="keyword">from</span>&#123;</span><br><span class="line">transform: rotate(<span class="number">45</span>deg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">50</span>% &#123;</span><br><span class="line">transform: rotate(<span class="number">310</span>deg);</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">100</span>%&#123;</span><br><span class="line">transform: rotate(<span class="number">405</span>deg);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">.loading&#123;</span><br><span class="line">width: <span class="number">100</span>px;</span><br><span class="line">height: <span class="number">100</span>px;</span><br><span class="line">border-radius: <span class="number">50</span>%;</span><br><span class="line">border:10px solid #ffff00;</span><br><span class="line">border-top-color: #ff00ff;</span><br><span class="line">animation: loading1;</span><br><span class="line">animation-duration: <span class="number">1</span>s;</span><br><span class="line">animation-timing-<span class="function"><span class="keyword">function</span>: <span class="title">linear</span>;</span></span><br><span class="line"><span class="function"><span class="title">animation</span>-<span class="title">iteration</span>-<span class="title">count</span>: <span class="title">infinite</span>;</span></span><br><span class="line"><span class="function">&#125;</span></span><br></pre></td></tr></table></figure></p><p>最终的实现效果就是：<br><img style="width:300px;height:300px" src="/2019/03/10/css双飞翼布局、圣杯布局、动画（2）/1.png" alt="第一种loading"></p><p>第二种，要稍微复杂一些，子类选择器控制了动画开始的delay，<br>首先是HTML:<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"loading"</span>&gt;</span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"pillar-loading"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"pillar-loading"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"pillar-loading"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"pillar-loading"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;span <span class="class"><span class="keyword">class</span></span>=<span class="string">"pillar-loading"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br></pre></td></tr></table></figure></p><p>然后是css<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">@keyframes loading2&#123;</span><br><span class="line"><span class="keyword">from</span>&#123;</span><br><span class="line"></span><br><span class="line">background-color:#00ffff;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">50</span>%&#123;</span><br><span class="line">transform: scaleY(<span class="number">1.5</span>);</span><br><span class="line">background-color: #ffff00</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">100</span>&#123;</span><br><span class="line"></span><br><span class="line">background-color: #00ffff</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">.loading&#123;</span><br><span class="line">width: <span class="number">20</span>%;</span><br><span class="line">height: <span class="number">200</span>px;</span><br><span class="line">display: flex;</span><br><span class="line">justify-content: center;</span><br><span class="line">align-items: center;</span><br><span class="line">margin:<span class="number">100</span>px auto;</span><br><span class="line">background-color: black;</span><br><span class="line">&#125;</span><br><span class="line">.pillar-loading &#123;</span><br><span class="line">border-radius: <span class="number">40</span>%;</span><br><span class="line">width: <span class="number">15</span>px;</span><br><span class="line">height: <span class="number">100</span>px;</span><br><span class="line">margin: <span class="number">10</span>px;</span><br><span class="line">background-color: #ff00ff;</span><br><span class="line">animation: loading2;</span><br><span class="line">animation-duration: <span class="number">1.1</span>s;</span><br><span class="line">animation-timing-<span class="function"><span class="keyword">function</span>: <span class="title">linear</span>;</span></span><br><span class="line"><span class="function"><span class="title">animation</span>-<span class="title">iteration</span>-<span class="title">count</span>: <span class="title">infinite</span>;</span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function">.<span class="title">pillar</span>-<span class="title">loading</span>:<span class="title">nth</span>-<span class="title">child</span>(<span class="params"><span class="number">2</span></span>)</span>&#123;</span><br><span class="line">animation-delay: <span class="number">0.2</span>s</span><br><span class="line">&#125;</span><br><span class="line">.pillar-loading:nth-child(<span class="number">3</span>)&#123;</span><br><span class="line">animation-delay: <span class="number">0.4</span>s</span><br><span class="line">&#125;</span><br><span class="line">.pillar-loading:nth-child(<span class="number">4</span>)&#123;</span><br><span class="line">animation-delay: <span class="number">0.6</span>s</span><br><span class="line">&#125;</span><br><span class="line">.pillar-loading:nth-child(<span class="number">5</span>)&#123;</span><br><span class="line">animation-delay: <span class="number">0.8</span>s</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>最终的实现效果是：<br><img style="width:300px;height:300px" src="/2019/03/10/css双飞翼布局、圣杯布局、动画（2）/2.png" alt="第二种loading"></p><p>第三种和第二种类似，只不过更加麻烦一些：<br>动画：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">@keyframes pointLoading &#123;</span><br><span class="line"><span class="number">0</span>% &#123;</span><br><span class="line">transform: scale(<span class="number">1</span>);</span><br><span class="line">opacity: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">50</span>% &#123;</span><br><span class="line">transform: scale(<span class="number">.3</span>);</span><br><span class="line">opacity: <span class="number">0.5</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="number">100</span>%&#123;</span><br><span class="line"></span><br><span class="line">transform: scale(<span class="number">1</span>);</span><br><span class="line">opacity: <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>div设计：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">.point-loading &#123;</span><br><span class="line">width: <span class="number">100</span>px;</span><br><span class="line">height: <span class="number">100</span>px;</span><br><span class="line">position: relative;</span><br><span class="line">margin: <span class="number">0</span> auto;</span><br><span class="line">margin-top: <span class="number">100</span>px;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point &#123;</span><br><span class="line">width: <span class="number">20</span>px;</span><br><span class="line">height: <span class="number">20</span>px;</span><br><span class="line">border-radius: <span class="number">50</span>%;</span><br><span class="line">background: lightgreen;</span><br><span class="line">position: absolute;</span><br><span class="line">animation:pointLoading <span class="number">1</span>s infinite;</span><br><span class="line"><span class="comment">/* <span class="doctag">TODO:</span> 需设置圆点loading的圆点元素其动画效果属性，设置其相应的动画名称，动画完成一个周期所花费的时间为1s, 且动画无限循环播放 */</span></span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">1</span>) &#123;</span><br><span class="line">left: <span class="number">0</span>;</span><br><span class="line">top: <span class="number">50</span>%;</span><br><span class="line">margin-top: <span class="number">-10</span>px;</span><br><span class="line">animation-delay: <span class="number">0.13</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">2</span>) &#123;</span><br><span class="line">left: <span class="number">14</span>px;</span><br><span class="line">top: <span class="number">14</span>px;</span><br><span class="line">animation-delay: <span class="number">0.26</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">3</span>) &#123;</span><br><span class="line">left: <span class="number">50</span>%;</span><br><span class="line">top: <span class="number">0</span>;</span><br><span class="line">margin-left: <span class="number">-10</span>px;</span><br><span class="line">animation-delay: <span class="number">0.39</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">4</span>) &#123;</span><br><span class="line">top: <span class="number">14</span>px;</span><br><span class="line">right: <span class="number">14</span>px;</span><br><span class="line">animation-delay: <span class="number">0.52</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">5</span>) &#123;</span><br><span class="line">right: <span class="number">0</span>;</span><br><span class="line">top: <span class="number">50</span>%;</span><br><span class="line">margin-top: <span class="number">-10</span>px;</span><br><span class="line">animation-delay: <span class="number">0.65</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">6</span>) &#123;</span><br><span class="line">right: <span class="number">14</span>px;</span><br><span class="line">bottom: <span class="number">14</span>px;</span><br><span class="line">animation-delay: <span class="number">0.78</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">7</span>) &#123;</span><br><span class="line">bottom: <span class="number">0</span>;</span><br><span class="line">left: <span class="number">50</span>%;</span><br><span class="line">margin-left: <span class="number">-10</span>px;</span><br><span class="line">animation-delay: <span class="number">0.91</span>s;</span><br><span class="line">&#125;</span><br><span class="line">.point-loading .point:nth-child(<span class="number">8</span>) &#123;</span><br><span class="line">bottom: <span class="number">14</span>px;</span><br><span class="line">left: <span class="number">14</span>px;</span><br><span class="line">animation-delay: <span class="number">1.04</span>s;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>html<br><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"point-loading"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">"point"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></p><p><img style="width:300px;height:300px" src="/2019/03/10/css双飞翼布局、圣杯布局、动画（2）/3.png" alt="第二种loading"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;之后是动画，用最起初的css，我记得刚接触css的时候，看到有人说css是一种越用越发现它深奥的技术，看似简单其实能实现很丰富的样式。&lt;/p&gt;
&lt;p&gt;首先看一下css动画的基本属性。&lt;/p&gt;
&lt;table border=&quot;1&quot;&gt;&lt;tr&gt;&lt;th&gt;属性名&lt;/th&gt;&lt;th&gt;含义&lt;
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>CSS双飞翼布局、圣杯布局、动画</title>
    <link href="http://fendicloser.top/2019/03/03/css%E5%8F%8C%E9%A3%9E%E7%BF%BC%E5%B8%83%E5%B1%80%E3%80%81%E5%9C%A3%E6%9D%AF%E5%B8%83%E5%B1%80%E3%80%81%E5%8A%A8%E7%94%BB/"/>
    <id>http://fendicloser.top/2019/03/03/css双飞翼布局、圣杯布局、动画/</id>
    <published>2019-03-03T06:03:00.000Z</published>
    <updated>2019-04-01T02:04:22.166Z</updated>
    
    <content type="html"><![CDATA[<p>之前刚接触CSS的时候学习了圣杯布局和双飞翼布局的方法，以及用css动画生成loading画面。前两个布局是面试时候非常常被问到的css问题，而第二个则是在实际工作中非常常用的素材，这里简单讲一下基本思想并做一下备忘。<br>网上关于这三项的blog特别多，但是关键不是直接应用，而是记住如何设置和他们的设计步骤、设计思想</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">圣杯布局和双飞翼布局主要参考：</span><br><span class="line">https:<span class="comment">//www.cnblogs.com/imwtr/p/4441741.html</span></span><br><span class="line">https:<span class="comment">//www.cnblogs.com/lovemomo/p/4885866.html</span></span><br><span class="line">https:<span class="comment">//www.jianshu.com/p/f9bcddb0e8b4    尤其是这一篇，非常详细</span></span><br><span class="line">loading主要参考：腾讯课堂next课堂前端教程</span><br></pre></td></tr></table></figure><p>圣杯布局的基本思路,各个部分分别是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;&lt;header&gt;、&lt;container&gt;、&lt;middle&gt;、&lt;left&gt;、&lt;right&gt;、&lt;footer&gt;&quot;, </span><br><span class="line">其中&quot;&lt;middle&gt;、&lt;left&gt;、&lt;right&gt;是&lt;container&gt;&quot;的子元素.</span><br></pre></td></tr></table></figure></p><p>第一步先写出html结构</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"container"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br></pre></td></tr></table></figure><p>第二步，先给上面的结构写基础css，注意：<middle>要先渲染，把<middle>的width设置成100%, 然后<middle>\<left>\<right>的float设置成left<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">header</span>&#123;<span class="attribute">background-color</span>: yellow;<span class="attribute">height</span>: <span class="number">40px</span>;<span class="attribute">width</span>: <span class="number">100%</span>;&#125;</span><br><span class="line"><span class="selector-class">.container</span>&#123;<span class="attribute">height</span>: <span class="number">400px</span>;<span class="attribute">overflow</span>: hidden&#125;</span><br><span class="line"><span class="selector-class">.middle</span>&#123;<span class="attribute">width</span>:<span class="number">100%</span>;<span class="attribute">height</span>:<span class="number">200px</span>;<span class="attribute">float</span>:left;<span class="attribute">background-color</span>: <span class="number">#f92672</span>&#125;</span><br><span class="line"><span class="selector-class">.left</span>&#123;<span class="attribute">width</span>:<span class="number">200px</span>;<span class="attribute">height</span>: <span class="number">200px</span>;<span class="attribute">float</span>: left;<span class="attribute">background-color</span>: <span class="number">#1d9cf7</span>&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;<span class="attribute">width</span>: <span class="number">200px</span>;<span class="attribute">height</span>: <span class="number">200px</span>;<span class="attribute">float</span>:left;<span class="attribute">background-color</span>: <span class="number">#aaaaaa</span>&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;<span class="attribute">background-color</span>: <span class="number">#141414</span>;<span class="attribute">height</span>: <span class="number">40px</span>;<span class="attribute">width</span>: <span class="number">100px</span>&#125;</span><br></pre></td></tr></table></figure></right></left></middle></middle></middle></p><p>此时看到的应该是这样的<br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/step2.png" alt><br>此时看到的中间蓝色部分是middle，因为middle是新渲染的，left和right已经被挤压到下面去了。</p><p>第三步，所以下一步就是把想办法把left和right调上去。用到的css属性是margin-left，但是left和right的参数是不一样的：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.left</span>&#123;<span class="attribute">margin-left</span>:-<span class="number">100%</span>;&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;<span class="attribute">marign-left</span>:-<span class="number">200px</span>;&#125;</span><br></pre></td></tr></table></figure></p><p>这样左盒子才可以往最左边移动。这样右盒子才可以在一行的最右边显示出自己。<br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/step3.png" alt><br>当我们改变window的大小的时候，middle的大小就可以自适应了。</p><p>第四步，middle的大小还需要改变，因为middle两边的内容会被left和right挡住。</p><p>利用父级元素设置左右内边距的值，把父级的三个子盒子往中间挤。</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.container</span>&#123; <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">200px</span>;&#125; <span class="comment">/*这里的200px是左右盒子的宽度。*/</span></span><br></pre></td></tr></table></figure><p>我们可以看到，左右两边的内边距是有了，但是中间盒子上的内容还是被压着。</p><p>其次:给左右两个盒子加一个定位，加了定位之后左右两个盒子就可以设置left和right值。</p><p>代码如下：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.left</span>&#123; <span class="attribute">position</span>: relative; <span class="attribute">left</span>: -<span class="number">200px</span>;&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;<span class="attribute">position</span>: relative;<span class="attribute">right</span>: -<span class="number">200px</span>;&#125;</span><br></pre></td></tr></table></figure></p><p>好的传统意义上的圣杯布局以及完成了，额外一点，这个时候middle中的文本内容还是会插入right里面，<br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/unfinished.png" alt><br>这个时候，可以：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.middle</span>&#123;<span class="attribute">word-break</span>: break-all;&#125;</span><br></pre></td></tr></table></figure></p><p>所以最终的结果就是这样的<br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/finished.png" alt></p><h3 id="然后是双飞翼布局"><a href="#然后是双飞翼布局" class="headerlink" title="然后是双飞翼布局"></a>然后是双飞翼布局</h3><p>同样是实现三栏布局<br>同样的，我们先仿照圣杯布局的写法写，但是在middle里面多加一层div，id是inside</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>实现三栏水平布局之双飞翼布局<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">        header,</span></span><br><span class="line"><span class="undefined">        footer &#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#333</span>;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background</span>: <span class="selector-id">#aaa</span>;</span></span><br><span class="line"><span class="undefined">            text-align: center;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">height</span><span class="selector-pseudo">:50px</span>;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.middle</span>&#123;</span></span><br><span class="line"><span class="undefined">            float: left;</span></span><br><span class="line"><span class="undefined">            width: 100%;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">background-color</span>: <span class="selector-id">#75715e</span>;</span></span><br><span class="line"><span class="undefined">            height: 400px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.left</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">float</span><span class="selector-pseudo">:left</span>;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            background-color: red;</span></span><br><span class="line"><span class="undefined">            height: 400px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="css">        <span class="selector-class">.right</span>&#123;</span></span><br><span class="line"><span class="css">            <span class="selector-tag">float</span><span class="selector-pseudo">:right</span>;</span></span><br><span class="line"><span class="undefined">            background-color: green;</span></span><br><span class="line"><span class="undefined">            width: 200px;</span></span><br><span class="line"><span class="undefined">            height: 400px;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">        footer&#123;</span></span><br><span class="line"><span class="undefined">            clear: both;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">header</span>&gt;</span><span class="tag">&lt;/<span class="name">header</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"middle"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"inside"</span>&gt;</span>middle<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"left"</span>&gt;</span>left<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"right"</span>&gt;</span>footer<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">footer</span>&gt;</span><span class="tag">&lt;/<span class="name">footer</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure><p>得到的就是下面的布局<br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/shuang.png" alt><br>在此基础上，我们加上：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.left</span>&#123;<span class="attribute">margin-left</span>: -<span class="number">100%</span>;&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;<span class="attribute">margin-left</span>:-<span class="number">200px</span>;&#125;</span><br><span class="line"><span class="selector-id">#inside</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">200px</span> <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><p>得到的结果就是<br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/shuang2.png" alt><br>这里其实有一个问题还不太明白，在圣杯布局中footer标签并没有用clear：both消除浮动，但是在双飞翼中，必须消除浮动。</p><h3 id="总结一下"><a href="#总结一下" class="headerlink" title="总结一下"></a>总结一下</h3><p>圣杯布局和双飞翼布局是非常经典的三栏布局解决方法，两者的区别就在于：如何解决middle栏的被遮罩的问题。<br>圣杯布局的方法是：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*.container&#123; padding: 0 200px;&#125;*/</span></span><br><span class="line"><span class="selector-class">.container</span>&#123; <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">200px</span>;&#125;</span><br><span class="line"><span class="comment">/*其次:给左右两个盒子加一个定位，加了定位之后左右两个盒子就可以设置left和right值。*/</span></span><br><span class="line"><span class="selector-class">.left</span>&#123; <span class="attribute">position</span>: relative; <span class="attribute">left</span>: -<span class="number">200px</span>;&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;<span class="attribute">position</span>: relative;<span class="attribute">right</span>: -<span class="number">210px</span>;&#125;</span><br></pre></td></tr></table></figure></p><p>双飞翼布局的方法就是上一段代码：<br><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.left</span>&#123;<span class="attribute">margin-left</span>: -<span class="number">100%</span>;&#125;</span><br><span class="line"><span class="selector-class">.right</span>&#123;<span class="attribute">margin-left</span>:-<span class="number">200px</span>;&#125;</span><br><span class="line"><span class="selector-id">#inside</span>&#123;</span><br><span class="line">    <span class="attribute">margin</span>:<span class="number">0</span> <span class="number">200px</span> <span class="number">0</span> <span class="number">200px</span>;</span><br><span class="line">    <span class="attribute">height</span>:<span class="number">100px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">footer</span>&#123;</span><br><span class="line">    <span class="attribute">clear</span>: both;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h4><p>loading动画本来是腾讯课堂next学院的一道题，对与当时刚接触css的我来说，感觉碉堡了，后来在工作中还真的用到了。<br>先看一下效果。</p><p><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/圆形.png" alt><br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/竖条.png" alt><br><img src="/2019/03/03/css双飞翼布局、圣杯布局、动画/多点.png" alt><br>三种图片的实现难度依次上升。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;之前刚接触CSS的时候学习了圣杯布局和双飞翼布局的方法，以及用css动画生成loading画面。前两个布局是面试时候非常常被问到的css问题，而第二个则是在实际工作中非常常用的素材，这里简单讲一下基本思想并做一下备忘。&lt;br&gt;网上关于这三项的blog特别多，但是关键不是直接
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>原生js、jquery实现国际化的几种方法</title>
    <link href="http://fendicloser.top/2019/02/26/%E5%8E%9F%E7%94%9Fjs%E3%80%81jquery%E5%AE%9E%E7%8E%B0%E5%9B%BD%E9%99%85%E5%8C%96%E7%9A%84%E5%87%A0%E7%A7%8D%E6%96%B9%E6%B3%95/"/>
    <id>http://fendicloser.top/2019/02/26/原生js、jquery实现国际化的几种方法/</id>
    <published>2019-02-26T07:56:24.000Z</published>
    <updated>2019-02-26T07:56:24.160Z</updated>
    
    <summary type="html">
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>JavaScrip-ACSII码的迷之操作</title>
    <link href="http://fendicloser.top/2019/02/25/javascrip-acsii%E7%A0%81%E7%9A%84%E8%BF%B7%E4%B9%8B%E6%93%8D%E4%BD%9C/"/>
    <id>http://fendicloser.top/2019/02/25/javascrip-acsii码的迷之操作/</id>
    <published>2019-02-25T12:49:16.000Z</published>
    <updated>2019-02-25T15:30:39.218Z</updated>
    
    <content type="html"><![CDATA[<p>最近一直在接触acsii码，这种cs学生从大一第一周就开始接触的东西其实在实际应用中离我们非常遥远，如果你不做底层的东西可能永远都不会用到。可这种好事就被我碰上了，偏偏还不是底层操作，要用js，偏偏还不是十进制转换</p><p>有两个字符串：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> xM=<span class="string">'12'</span>  <span class="comment">//string '12'</span></span><br><span class="line"><span class="keyword">var</span> yM=<span class="string">'02'</span> <span class="comment">//string '02'</span></span><br></pre></td></tr></table></figure></p><p>对这两个用.charCodeAt(), .charCodeAt()返回字符串的十进制ascii码，对他用：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="string">'02'</span></span><br><span class="line"><span class="keyword">var</span> b=<span class="string">'12'</span></span><br><span class="line"><span class="built_in">console</span>.log(a.charCodeAt())</span><br><span class="line"><span class="built_in">console</span>.log(b.charCodeAt())</span><br><span class="line"><span class="built_in">console</span>.log((a.charCodeAt(<span class="number">1</span>)==b.charCodeAt(<span class="number">1</span>)),b.charCodeAt(<span class="number">1</span>))</span><br></pre></td></tr></table></figure></p><p>得到的结果是：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">\\<span class="number">48</span></span><br><span class="line">\\<span class="number">49</span></span><br><span class="line">\\<span class="literal">true</span> <span class="number">50</span></span><br></pre></td></tr></table></figure></p><p>也就是说.charCodeAt()是有参数的，得到的是十进制的acsii码值，但是有的时候我们需要的不是十进制的ascii，比如蓝牙连接的时候需要的就是十六进制的ascii， 例如<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ab01#</span><br></pre></td></tr></table></figure></p><p>查阅ascii对照表，我们知道：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//$:24 #:23 '0':30  '1':31</span></span><br><span class="line"><span class="comment">// 再加上a-&gt;'02'  b--&gt;'12'</span></span><br></pre></td></tr></table></figure></p><p>这里插一下字符串的截取方法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="string">'02'</span>  </span><br><span class="line"><span class="keyword">var</span> b=<span class="string">'12'</span> </span><br><span class="line"><span class="keyword">var</span> a1=a.substring(<span class="number">1</span>,<span class="number">0</span>) <span class="comment">//截取到'0'</span></span><br><span class="line"><span class="keyword">var</span> a2=a.substr(<span class="number">1</span>)      <span class="comment">//截取到'1'</span></span><br><span class="line"><span class="keyword">var</span> b1=b.substring(<span class="number">1</span>,<span class="number">0</span>)</span><br><span class="line"><span class="keyword">var</span> b2=b.substr(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></p><p>ok，综合上面的方法把a和b转换成16进制acsii码：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a=<span class="string">'02'</span>  </span><br><span class="line"><span class="keyword">var</span> b=<span class="string">'12'</span> </span><br><span class="line"><span class="keyword">var</span> a1=a.substring(<span class="number">1</span>,<span class="number">0</span>).charCodeAt().toString(<span class="number">16</span>)</span><br><span class="line"><span class="keyword">var</span> a2=a.substr(<span class="number">1</span>).charCodeAt().toString(<span class="number">16</span>)    </span><br><span class="line"><span class="keyword">var</span> b1=b.substring(<span class="number">1</span>,<span class="number">0</span>).charCodeAt().toString(<span class="number">16</span>)</span><br><span class="line"><span class="keyword">var</span> b2=b.substr(<span class="number">1</span>).charCodeAt().toString(<span class="number">16</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'24'</span>+a1+a2+b1+b2+<span class="string">'3031'</span>)<span class="comment">//$ab01#</span></span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;最近一直在接触acsii码，这种cs学生从大一第一周就开始接触的东西其实在实际应用中离我们非常遥远，如果你不做底层的东西可能永远都不会用到。可这种好事就被我碰上了，偏偏还不是底层操作，要用js，偏偏还不是十进制转换&lt;/p&gt;
&lt;p&gt;有两个字符串：&lt;br&gt;&lt;figure cla
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>express-router-ajax-post的实现</title>
    <link href="http://fendicloser.top/2019/02/25/express-router-ajax-post%E7%9A%84%E5%AE%9E%E7%8E%B0/"/>
    <id>http://fendicloser.top/2019/02/25/express-router-ajax-post的实现/</id>
    <published>2019-02-25T12:05:18.000Z</published>
    <updated>2019-02-25T12:42:18.458Z</updated>
    
    <content type="html"><![CDATA[<p>网上用node-express实现的ajax很多，但是都没有涉及到router，<br>这是在谢菲时我导师写的一个Dome，自己曾经多次尝试，但是总报错，这里记录一下</p><p>用intellij生成node应用，文件结构如下：<br><img src="/2019/02/25/express-router-ajax-post的实现/文件结构.png" alt></p><p>/bin/www不需要修改，但是app.js需要修改，因为post方法有请求体，在Nodejs原生的http模块中，请求体是要基于流的方式来接受和解析。<br>body-parser是一个HTTP请求体解析的中间件，使用这个模块可以解析JSON、Raw、文本、URL-encoded格式的请求体，<br>用npm start 安装body-parser即可</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> bodyParser=<span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> indexRouter = <span class="built_in">require</span>(<span class="string">'./routes/index'</span>);</span><br><span class="line"><span class="keyword">var</span> usersRouter = <span class="built_in">require</span>(<span class="string">'./routes/users'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">// view engine setup</span></span><br><span class="line">app.set(<span class="string">'views'</span>, path.join(__dirname, <span class="string">'views'</span>));</span><br><span class="line">app.set(<span class="string">'view engine'</span>, <span class="string">'ejs'</span>);</span><br><span class="line"></span><br><span class="line">app.use(logger(<span class="string">'dev'</span>));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// app.use(express.json());</span></span><br><span class="line"><span class="comment">// app.use(express.urlencoded(&#123; extended: false &#125;));</span></span><br><span class="line"></span><br><span class="line">app.use(bodyParser.json());</span><br><span class="line">app.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br></pre></td></tr></table></figure><p>如代码所示，把express.json()和express.urlencoded({ extended: false })换成bodyParser.json和body-parser.urlencoded({ extended: false })就可以了，这里是express-node方法的关键</p><p>再看页面部分： 在views/index.ejs中<br>引入jquery：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">"https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure></p><p>做一个表单，这里就是最简单的表单，名、姓、出生年份，submit后服务端可以通过出生年份计算出年龄，<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;form id=<span class="string">"xForm"</span> onsubmit=<span class="string">"onSubmit()"</span>&gt;</span><br><span class="line">      &lt;label <span class="keyword">for</span>=<span class="string">"firstname"</span>&gt;First name:<span class="xml"><span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">      &lt;input type=<span class="string">"text"</span> name=<span class="string">"firstname"</span> id=<span class="string">"firstname"</span> value=<span class="string">"longfu"</span>&gt;</span><br><span class="line">      &lt;p&gt;<span class="xml"><span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">'lastname'</span>&gt;</span>Last name:<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line">        &lt;input type=<span class="string">"text"</span> name=<span class="string">"lastname"</span> id=<span class="string">"lastname"</span> value=<span class="string">"Sun"</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;&lt;label for='year'&gt;Year of Birth:&lt;/</span>label&gt;</span><br><span class="line">        &lt;input type=<span class="string">"number"</span> name=<span class="string">"year"</span> id=<span class="string">"year"</span> value=<span class="string">"1900"</span>&gt;</span><br><span class="line">      &lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;p&gt;&lt;input type="submit" name="g" value="Submit" id="g"&gt;&lt;/</span>p&gt;</span><br><span class="line"></span><br><span class="line">    &lt;<span class="regexp">/form&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div id="results" style="margin-top:120px"&gt;&lt;/</span>div&gt;</span><br></pre></td></tr></table></figure></p><p>result div用来放服务端返回的json数据</p><p>接下来就是ajax了：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">onSubmit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> formArray=$(<span class="string">"form"</span>).serializeArray();</span><br><span class="line">        <span class="keyword">var</span> data=&#123;&#125;</span><br><span class="line">        <span class="keyword">for</span>(index <span class="keyword">in</span> formArray)&#123;</span><br><span class="line">            data[formArray[index].name]=formArray[index].value;</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        sendAjaxQuery(<span class="string">'/index'</span>,data)</span><br><span class="line">        event.preventDefault();</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">sendAjaxQuery</span>(<span class="params">url,data</span>)</span>&#123;</span><br><span class="line">        $.ajax(&#123;</span><br><span class="line">            url:url,</span><br><span class="line">            data:data,</span><br><span class="line">            dataType:<span class="string">'json'</span>,</span><br><span class="line">            type:<span class="string">'POST'</span>,</span><br><span class="line">            success:<span class="function"><span class="keyword">function</span>(<span class="params">dataR</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">var</span> ret=dataR;</span><br><span class="line">                <span class="built_in">document</span>.getElementById(<span class="string">'result'</span>).innerText=<span class="built_in">JSON</span>.stringify(ret)</span><br><span class="line">            &#125;,</span><br><span class="line">            error: <span class="function"><span class="keyword">function</span> (<span class="params">xhr, status, error</span>) </span>&#123;</span><br><span class="line">                              alert(<span class="string">'Error: '</span> + error.message);</span><br><span class="line">                          &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p><p>最后是路由里面的写法</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> router = express.Router();</span><br><span class="line"></span><br><span class="line"><span class="comment">/* GET home page. */</span></span><br><span class="line">router.get(<span class="string">'/'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">  res.render(<span class="string">'index'</span>, &#123; <span class="attr">title</span>: <span class="string">'Express'</span> &#125;);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">router.post(<span class="string">'/index'</span>, <span class="function"><span class="keyword">function</span>(<span class="params">req, res, next</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> userData = req.body;</span><br><span class="line">    <span class="keyword">if</span> (userData == <span class="literal">null</span>) &#123;</span><br><span class="line">        res.status(<span class="number">403</span>).send(<span class="string">'No data sent!'</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (!isNumeric(userData.year)) &#123;</span><br><span class="line">        res.status(<span class="number">403</span>).send(<span class="string">'Year is invalid!'</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> year = (<span class="keyword">new</span> <span class="built_in">Date</span>()).getFullYear()</span><br><span class="line">    userData.age = year - <span class="built_in">parseInt</span>(userData.year);</span><br><span class="line">    res.setHeader(<span class="string">'Content-Type'</span>, <span class="string">'application/json'</span>);</span><br><span class="line">    res.send(<span class="built_in">JSON</span>.stringify(userData));</span><br><span class="line"></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">isNumeric</span>(<span class="params">n</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> !<span class="built_in">isNaN</span>(<span class="built_in">parseInt</span>(n)) &amp;&amp; <span class="built_in">isFinite</span>(n);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = router;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;网上用node-express实现的ajax很多，但是都没有涉及到router，&lt;br&gt;这是在谢菲时我导师写的一个Dome，自己曾经多次尝试，但是总报错，这里记录一下&lt;/p&gt;
&lt;p&gt;用intellij生成node应用，文件结构如下：&lt;br&gt;&lt;img src=&quot;/2019/0
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>react-native虚拟dom动态循环生成组件</title>
    <link href="http://fendicloser.top/2019/02/21/react-native%E8%99%9A%E6%8B%9Fdom%E5%8A%A8%E6%80%81%E5%BE%AA%E7%8E%AF%E7%94%9F%E6%88%90%E7%BB%84%E4%BB%B6/"/>
    <id>http://fendicloser.top/2019/02/21/react-native虚拟dom动态循环生成组件/</id>
    <published>2019-02-21T15:05:38.000Z</published>
    <updated>2019-02-21T15:23:01.755Z</updated>
    
    <content type="html"><![CDATA[<p>使用react做了三个项目了，慢慢的感受到了虚拟dom的便利，但是稍有稍有不慎还是会报错</p><p>#<br>#<br>#<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React,&#123;Component&#125; <span class="keyword">from</span> <span class="string">"react"</span></span><br><span class="line"><span class="keyword">import</span> &#123;View,Text,StyleSheet, Dimensions,TouchableOpacity, Alert,Platform,ScrollView,Image,Button,&#125; <span class="keyword">from</span> <span class="string">"react-native"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> &#123;ColorWheel&#125; <span class="keyword">from</span> <span class="string">'react-native-color-wheel'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> width=Dimensions.get(<span class="string">'window'</span>).width;</span><br><span class="line"><span class="keyword">var</span> height=Dimensions.get(<span class="string">'window'</span>).height;</span><br><span class="line"><span class="keyword">var</span> buttonArea=height/<span class="number">4</span><span class="number">-10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Orientation <span class="keyword">from</span> <span class="string">'react-native-orientation'</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">colorScreen</span> <span class="keyword">extends</span> <span class="title">Component</span></span>&#123;</span><br><span class="line">    <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">        <span class="keyword">super</span>(props);</span><br><span class="line">        <span class="keyword">this</span>.state=&#123;</span><br><span class="line">            receiveData:<span class="string">''</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.arrLeftTrangle=[]</span><br><span class="line">        <span class="keyword">this</span>.arrRightTrangle=[]</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;<span class="number">4</span>;i++)&#123;</span><br><span class="line">            <span class="keyword">this</span>.arrLeftTrangle.push(</span><br><span class="line">                &lt;View key=&#123;i&#125;</span><br><span class="line">                      style=&#123;&#123;<span class="attr">width</span>: <span class="number">0</span>, <span class="attr">height</span>: <span class="number">0</span>, <span class="attr">borderColor</span>: <span class="string">'transparent'</span>, <span class="attr">borderTopWidth</span>: <span class="number">15</span>, <span class="attr">borderBottomWidth</span>: <span class="number">15</span>, <span class="attr">borderRightWidth</span>: <span class="number">30</span>, <span class="attr">borderRightColor</span>: <span class="string">'skyblue'</span>&#125;&#125;&gt;</span><br><span class="line">                &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">            )</span></span><br><span class="line"><span class="regexp">            this.arrRightTrangle.push(</span></span><br><span class="line"><span class="regexp">                &lt;View key=&#123;i&#125;</span></span><br><span class="line"><span class="regexp">                      style=&#123;&#123;width: 0, height: 0, borderColor: 'transparent', borderTopWidth: 15, borderBottomWidth: 15, borderLeftWidth: 30, borderLeftColor: 'skyblue'&#125;&#125;&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>View&gt;</span><br><span class="line">            )</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    componentDidMount()&#123;</span><br><span class="line">        Orientation.lockToLandscape()</span><br><span class="line">    &#125;</span><br><span class="line">    componentWillUnmount()&#123;</span><br><span class="line">        Orientation.lockToLandscape()</span><br><span class="line">    &#125;</span><br><span class="line">    render()&#123;</span><br><span class="line">        <span class="keyword">return</span>(</span><br><span class="line">            &lt;View style=&#123;&#123;<span class="attr">flexDirection</span>:<span class="string">'row'</span>,<span class="attr">alignItems</span>: <span class="string">'center'</span>,<span class="attr">justifyContent</span>: <span class="string">'center'</span>&#125;&#125;&gt;</span><br><span class="line">                &lt;View style=&#123;&#123;<span class="attr">justifyContent</span>:<span class="string">'flex-end'</span>,<span class="attr">flexDirection</span>:<span class="string">'row'</span>,<span class="attr">backgroundColor</span>:<span class="string">'red'</span>,<span class="attr">height</span>:width/<span class="number">10</span>*<span class="number">8</span>,<span class="attr">width</span>:height/<span class="number">4</span><span class="number">-10</span>&#125;&#125;&gt;</span><br><span class="line"></span><br><span class="line">                    &lt;View style=&#123;&#123;<span class="attr">alignItems</span>:<span class="string">'center'</span>,<span class="attr">justifyContent</span>:<span class="string">'space-around'</span>,<span class="attr">backgroundColor</span>:<span class="string">'black'</span>,<span class="attr">width</span>:<span class="number">30</span>,<span class="attr">height</span>:width/<span class="number">10</span>*<span class="number">8</span><span class="number">-10</span>&#125;&#125;&gt;</span><br><span class="line">                        &#123;<span class="keyword">this</span>.arrLeftTrangle&#125;</span><br><span class="line">                    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>View&gt;</span><br><span class="line"></span><br><span class="line">                &lt;View style=&#123;&#123;<span class="attr">flexDirection</span>:<span class="string">'row'</span>,<span class="attr">justifyContent</span>:<span class="string">'flex-start'</span>,<span class="attr">backgroundColor</span>:<span class="string">'red'</span>,<span class="attr">height</span>:width/<span class="number">10</span>*<span class="number">8</span>,<span class="attr">width</span>:height/<span class="number">4</span><span class="number">-10</span>&#125;&#125;&gt;</span><br><span class="line">                    &lt;View style=&#123;&#123;<span class="attr">alignItems</span>:<span class="string">'center'</span>,<span class="attr">justifyContent</span>:<span class="string">'space-around'</span>,<span class="attr">backgroundColor</span>:<span class="string">'black'</span>,<span class="attr">width</span>:<span class="number">30</span>,<span class="attr">height</span>:width/<span class="number">10</span>*<span class="number">8</span><span class="number">-10</span>&#125;&#125;&gt;</span><br><span class="line">                        &#123;<span class="keyword">this</span>.arrRightTrangle&#125;</span><br><span class="line"></span><br><span class="line">                    &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">                &lt;/</span>View&gt;</span><br><span class="line">            &lt;<span class="regexp">/View&gt;</span></span><br><span class="line"><span class="regexp">        );</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure></p><p>可以用这个方式修改虚拟dom的样式<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">changeChild(key) &#123;</span><br><span class="line">        <span class="keyword">var</span> oldArr1=<span class="keyword">this</span>.state.arr1.split(<span class="string">''</span>)</span><br><span class="line">        <span class="keyword">if</span>(oldArr1[key]==<span class="number">0</span>)&#123;</span><br><span class="line">            oldArr1[key]=<span class="number">1</span></span><br><span class="line">            <span class="keyword">this</span>.arr1[key].props.style.backgroundColor=<span class="string">'red'</span></span><br><span class="line"></span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            oldArr1[key]=<span class="number">0</span></span><br><span class="line">            <span class="keyword">this</span>.arr1[key].props.style.backgroundColor=<span class="string">'white'</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> newArr1=oldArr1.join(<span class="string">''</span>)</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            arr1:newArr1</span><br><span class="line">        &#125;)</span><br><span class="line">        <span class="keyword">this</span>.setUpdate();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;使用react做了三个项目了，慢慢的感受到了虚拟dom的便利，但是稍有稍有不慎还是会报错&lt;/p&gt;
&lt;p&gt;#&lt;br&gt;#&lt;br&gt;#&lt;br&gt;&lt;figure class=&quot;highlight javascript&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pr
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>千道前端面试题</title>
    <link href="http://fendicloser.top/2019/02/19/%E5%8D%83%E9%81%93%E5%89%8D%E7%AB%AF%E9%9D%A2%E8%AF%95%E9%A2%98/"/>
    <id>http://fendicloser.top/2019/02/19/千道前端面试题/</id>
    <published>2019-02-19T15:02:16.000Z</published>
    <updated>2019-02-21T15:02:08.516Z</updated>
    
    <content type="html"><![CDATA[<p>整理常见面试题</p><h4 id="1-ES6-里-let-和-var-的区别"><a href="#1-ES6-里-let-和-var-的区别" class="headerlink" title="1. ES6 里 let 和 var 的区别"></a>1. ES6 里 let 和 var 的区别</h4><p>答： 首先let不能重复声明，var的作用域被规定为一个函数作用域，而let则被规定为块作用域，块作用域要比函数作用域小一些，但是如果两者既没在函数中，也没在块作用域中定义，那么两者都属于全局作用域。let可以防止变量污染，比如for循环中的let，只能在这个for循环中用到。</p><h4 id="2-简述事件委托机制（事件捕获、冒泡，父元素监听）"><a href="#2-简述事件委托机制（事件捕获、冒泡，父元素监听）" class="headerlink" title="2. 简述事件委托机制（事件捕获、冒泡，父元素监听）"></a>2. 简述事件委托机制（事件捕获、冒泡，父元素监听）</h4><p>答： 要用明白事件委托就得先知道事件捕获和冒泡，</p><p>   事件冒泡是指一个元素接收到事件后会向他的父级传递事件，一直到window，</p><p>   事件捕获是指从dom的根开始事件被从目标元素的所以祖先元素开始向下传递，div.addEventListener(‘click’,function(){},true), 这第三个元素为true时就是捕获获取，默认为冒泡获取。</p><p>   事件委托就是把子元素的事件放在父元素上，这样能提高性能，缩短查找dom的事件，第二，新的子元素也有相同的事件。<br>   当需要停止冒泡行为时，可以使用</p>   <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">stopBubble</span>(<span class="params">e</span>) </span></span><br><span class="line"><span class="function">   </span>&#123;  <span class="comment">//如果提供了事件对象，则这是一个非IE浏览器 </span></span><br><span class="line">       <span class="keyword">if</span> ( e &amp;&amp; e.stopPropagation )      <span class="comment">//因此它支持W3C的stopPropagation()方法 </span>     </span><br><span class="line">             e.stopPropagation();  </span><br><span class="line">       <span class="keyword">else</span>      <span class="comment">//否则，我们需要使用IE的方式来取消事件冒泡 </span>     </span><br><span class="line">             <span class="built_in">window</span>.event.cancelBubble = <span class="literal">true</span>;  </span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>   当需要阻止默认行为时，可以使用·<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//code from http://caibaojian.com/javascript-stoppropagation-preventdefault.html</span> </span><br><span class="line"><span class="comment">// 阻止浏览器的默认行为 </span> </span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">stopDefault</span>(<span class="params"> e </span>) </span></span><br><span class="line"><span class="function"></span>&#123;      <span class="comment">//阻止默认浏览器动作(W3C) </span>     </span><br><span class="line">     <span class="keyword">if</span> ( e &amp;&amp; e.preventDefault )          </span><br><span class="line">         e.preventDefault();      </span><br><span class="line">     <span class="comment">//IE中阻止函数器默认动作的方式 </span>     </span><br><span class="line">     <span class="keyword">else</span>          </span><br><span class="line">         <span class="built_in">window</span>.event.returnValue = <span class="literal">false</span>;      </span><br><span class="line">     <span class="keyword">return</span> <span class="literal">false</span>;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p><h4 id="3-HTTP-里的304状态码了解吗？"><a href="#3-HTTP-里的304状态码了解吗？" class="headerlink" title="3. HTTP 里的304状态码了解吗？"></a>3. HTTP 里的304状态码了解吗？</h4><p>答：404页面不存在，500服务器错误，301重定向，302临时重定向，200ok，401未授权啥的。304协商缓存</p><h4 id="4-协商缓存304"><a href="#4-协商缓存304" class="headerlink" title="4. 协商缓存304"></a>4. 协商缓存304</h4><p>答：浏览器缓存分为强制缓存和协商缓存，优先读取强制缓存。<br>     强制缓存分为expires和cache-control，而expires是一个特定的时间，是比较旧的标准和cache-control通常是一个具体的时间长度，比较新，优先级也比较高。</p><p>   而协商缓存包括etag和last-modified，last-modified的设置标准是资源的上次修改时间，而etag是为了应对资源修改时间可能很频繁的情况出现的，是基于资源的内容计算出来的值，因此优先级也较高。<br>     协商缓存与强制缓存的区别在于强制缓存不需要访问服务器，返回结果是200，协商缓存需要访问服务器，如果命中缓存的话，返回结果是304。</p><h4 id="5-HTTP-、-HTTPS-、-HTTP2-的区别？"><a href="#5-HTTP-、-HTTPS-、-HTTP2-的区别？" class="headerlink" title="5. HTTP 、 HTTPS 、 HTTP2 的区别？"></a>5. HTTP 、 HTTPS 、 HTTP2 的区别？</h4><p>答： HTTP1.0和HTTP1.1区别：<br> 缓存处理，在HTTP1.0中主要使用header里的If-Modified-Since,Expires来做为缓存判断的标准，HTTP1.1则引入了更多的缓存控制策略例如Entity tag，If-Unmodified-Since, If-Match, If-None-Match等更多可供选择的缓存头来控制缓存策略。</p><p>带宽优化及网络连接的使用，HTTP1.0中，存在一些浪费带宽的现象，例如客户端只是需要某个对象的一部分，而服务器却将整个对象送过来了，并且不支持断点续传功能，HTTP1.1则在请求头引入了range头域，它允许只请求资源的某个部分，即返回码是206（Partial Content），这样就方便了开发者自由的选择以便于充分利用带宽和连接。</p><p>错误通知的管理，在HTTP1.1中新增了24个错误状态响应码，如409（Conflict）表示请求的资源与资源的当前状态发生冲突；410（Gone）表示服务器上的某个资源被永久性的删除。</p><p>Host头处理，在HTTP1.0中认为每台服务器都绑定一个唯一的IP地址，因此，请求消息中的URL并没有传递主机名（hostname）。但随着虚拟主机技术的发展，在一台物理服务器上可以存在多个虚拟主机（Multi-homed Web Servers），并且它们共享一个IP地址。HTTP1.1的请求消息和响应消息都应支持Host头域，且请求消息中如果没有Host头域会报告一个错误（400 Bad Request）。</p><p>长连接，HTTP 1.1支持长连接（PersistentConnection）和请求的流水线（Pipelining）处理，在一个TCP连接上可以传送多个HTTP请求和响应，减少了建立和关闭连接的消耗和延迟，在HTTP1.1中默认开启Connection： keep-alive，一定程度上弥补了HTTP1.0每次请求都要创建连接的缺点<br>HTTPS HTTPS就是安全版的HTTP，并且由于当今时代对安全性要求更高,需要到CA申请证书，一般免费证书很少，需要交费。HTTP协议运行在TCP之上，所有传输的内容都是明文，HTTPS运行在SSL/TLS之上，SSL/TLS运行在TCP之上，所有传输的内容都经过加密的。<br>HTTP和HTTPS使用的是完全不同的连接方式，用的端口也不一样，前者是80，后者是443.HTTPS可以有效的防止运营商劫持，解决了防劫持的一个大问题。</p><h5 id="HTTPS改造"><a href="#HTTPS改造" class="headerlink" title="HTTPS改造"></a>HTTPS改造</h5><p>如果一个网站要全站由HTTP替换成HTTPS，可能需要关注以下几点：</p><ul><li>安装CA证书，一般的证书都是需要收费的，这边推荐一个比较好的购买证书网站：1）Let’s Encrypt，免费，快捷，支持多域名（不是通配符），三条命令即时签署+导出证书。缺点是暂时只有三个月有效期，到期需续签。2Comodo PositiveSSL，收费，但是比较稳定。 </li><li>在购买证书之后，在证书提供的网站上配置自己的域名，将证书下载下来之后，配置自己的web服务器，同时进行代码改造。 </li><li>HTTPS 降低用户访问速度。SSL握手，HTTPS 对速度会有一定程度的降低，但是只要经过合理优化和部署，HTTPS 对速度的影响完全可以接受。在很多场景下，HTTPS 速度完全不逊于 HTTP，如果使用 SPDY，HTTPS 的速度甚至还要比 HTTP 快。 </li><li>相对于HTTPS降低访问速度，其实更需要关心的是服务器端的CPU压力，HTTPS中大量的密钥算法计算，会消耗大量的CPU资源，只有足够的优化，HTTPS 的机器成本才不会明显增加。 </li></ul><h5 id="HTTP2-0的前世今生"><a href="#HTTP2-0的前世今生" class="headerlink" title="HTTP2.0的前世今生"></a>HTTP2.0的前世今生</h5><p>顾名思义有了HTTP1.x，那么HTTP2.0也就顺理成章的出现了。HTTP2.0可以说是SPDY的升级版（其实原本也是基于SPDY设计的），但是，HTTP2.0 跟 SPDY 仍有不同的地方，主要是以下两点：</p><ul><li>HTTP2.0 支持明文 HTTP 传输，而 SPDY 强制使用 HTTPS </li><li>HTTP2.0 消息头的压缩算法采用 HPACK，而非 SPDY 采用的 DEFLATE <h5 id="HTTP2-0的新特性"><a href="#HTTP2-0的新特性" class="headerlink" title="HTTP2.0的新特性"></a>HTTP2.0的新特性</h5></li><li>新的二进制格式（Binary Format），HTTP1.x的解析是基于文本。基于文本协议的格式解析存在天然缺陷，文本的表现形式有多样性，要做到健壮性考虑的场景必然很多，二进制则不同，只认0和1的组合。基于这种考虑HTTP2.0的协议解析决定采用二进制格式，实现方便且健壮。 </li><li>多路复用（MultiPlexing），即连接共享，即每一个request都是是用作连接共享机制的。一个request对应一个id，这样一个连接上可以有多个request，每个连接的request可以随机的混杂在一起，接收方可以根据request的 id将request再归属到各自不同的服务端请求里面。  </li><li>header压缩，如上文中所言，对前面提到过HTTP1.x的header带有大量信息，而且每次都要重复发送，HTTP2.0使用encoder来减少需要传输的header大小，通讯双方各自cache一份header fields表，既避免了重复header的传输，又减小了需要传输的大小。 </li><li>服务端推送（server push），同SPDY一样，HTTP2.0也具有server push功能。目前，有大多数网站已经启用HTTP2.0，例如YouTuBe，淘宝网等网站，利用chrome控制台可以查看是否启用H2： </li></ul><h4 id="题：简述一下用户访问网站的过程（缓存，DNS查询，建立链接，请求，响应，收到页面，解析DOM树，显示内容，首屏加载完成，可交互）"><a href="#题：简述一下用户访问网站的过程（缓存，DNS查询，建立链接，请求，响应，收到页面，解析DOM树，显示内容，首屏加载完成，可交互）" class="headerlink" title="题：简述一下用户访问网站的过程（缓存，DNS查询，建立链接，请求，响应，收到页面，解析DOM树，显示内容，首屏加载完成，可交互）"></a>题：简述一下用户访问网站的过程（缓存，DNS查询，建立链接，请求，响应，收到页面，解析DOM树，显示内容，首屏加载完成，可交互）</h4><p>client发出请求解析域名<a href="http://www.qq.com的报文" target="_blank" rel="noopener">www.qq.com的报文</a> 本地的域名服务器收到请求后, 查询本地缓存, 假设没有该纪录, 则本地域名服务器（每个地方的本地服务器不同，这里不详细说明了）则向根域名服务器发出请求解析域名www。<br>  qq。com。根域名服务器。收到请求后查询本地记录得到如下结果:qq。com NS dns。qq。com 。同时给出dns。qq。com的地址,并将结果返回给本地域名服务器。本地域名服务器收到根域名服务器的回应后 再发出请求解析www。qq。<br>  com的报文 根域名服务器收到本地域名服务器的请求后 找到一条www。qq。com A 119。147。74。18（假设www。qq。com的地址是119。147。74。18） 并将结果返回给客户机本地域名服务器 客户机域名服务器将返回的结果保存到本地缓存,同时将结果返回给客户机。<br>   这样就完成了一次域名解析，要成功访问某网站 实际就是解析某网站的域名 不知道这样你明白了没有。</p><p>  换种说法：<br>   输入网址,然后按回车,浏览器连接dns服务器,查找你输入的域名对应的ip地址,查到ip地址以后,浏览器连接该ip地址的80端口,发送查询网页请求,web服务器收到查询请求,发送被查询网页给请求浏览器,一次访问完成.</p><h4 id="题：列举数组的用法（建议分类列举，栈、队列、映射、删除等）"><a href="#题：列举数组的用法（建议分类列举，栈、队列、映射、删除等）" class="headerlink" title="题：列举数组的用法（建议分类列举，栈、队列、映射、删除等）"></a>题：列举数组的用法（建议分类列举，栈、队列、映射、删除等）</h4><h4 id="题：数组去重（直接倒进集合再倒出来）"><a href="#题：数组去重（直接倒进集合再倒出来）" class="headerlink" title="题：数组去重（直接倒进集合再倒出来）"></a>题：数组去重（直接倒进集合再倒出来）</h4><h4 id="题：跨域（图像ping，-JSONP-，-CORS-，-webSocket-等）"><a href="#题：跨域（图像ping，-JSONP-，-CORS-，-webSocket-等）" class="headerlink" title="题：跨域（图像ping， JSONP ， CORS ， webSocket 等）"></a>题：跨域（图像ping， JSONP ， CORS ， webSocket 等）</h4><h4 id="题：本地存储（-cookie-，-localStorage-，-sessionStorage-等）"><a href="#题：本地存储（-cookie-，-localStorage-，-sessionStorage-等）" class="headerlink" title="题：本地存储（ cookie ， localStorage ， sessionStorage 等）"></a>题：本地存储（ cookie ， localStorage ， sessionStorage 等）</h4><h4 id="题：HTTP-，-TCP-，-UDP-，-IP-（参看计算机网络教材）"><a href="#题：HTTP-，-TCP-，-UDP-，-IP-（参看计算机网络教材）" class="headerlink" title="题：HTTP ， TCP ， UDP ， IP （参看计算机网络教材）"></a>题：HTTP ， TCP ， UDP ， IP （参看计算机网络教材）</h4><h4 id="题：进程通信，有名和匿名管道（有名管道和无名管道）"><a href="#题：进程通信，有名和匿名管道（有名管道和无名管道）" class="headerlink" title="题：进程通信，有名和匿名管道（有名管道和无名管道）"></a>题：进程通信，有名和匿名管道（有名管道和无名管道）</h4><h4 id="编程：给定一个数组和一个正整数N，求一个和小于N的最长连续子数组"><a href="#编程：给定一个数组和一个正整数N，求一个和小于N的最长连续子数组" class="headerlink" title="编程：给定一个数组和一个正整数N，求一个和小于N的最长连续子数组"></a>编程：给定一个数组和一个正整数N，求一个和小于N的最长连续子数组</h4><h4 id="编程：CSS-的单行和多行截断？"><a href="#编程：CSS-的单行和多行截断？" class="headerlink" title="编程：CSS 的单行和多行截断？"></a>编程：CSS 的单行和多行截断？</h4><h4 id="编程：两栏布局，左边定宽右边自适应，等高"><a href="#编程：两栏布局，左边定宽右边自适应，等高" class="headerlink" title="编程：两栏布局，左边定宽右边自适应，等高"></a>编程：两栏布局，左边定宽右边自适应，等高</h4><h4 id="编程：给定两个有序数组，合并为一个有序数组。不许使用-js-的-concat-和-sort-方法"><a href="#编程：给定两个有序数组，合并为一个有序数组。不许使用-js-的-concat-和-sort-方法" class="headerlink" title="编程：给定两个有序数组，合并为一个有序数组。不许使用 js 的 concat 和 sort 方法"></a>编程：给定两个有序数组，合并为一个有序数组。不许使用 js 的 concat 和 sort 方法</h4><h4 id="题：简述自定义事件实现方法"><a href="#题：简述自定义事件实现方法" class="headerlink" title="题：简述自定义事件实现方法"></a>题：简述自定义事件实现方法</h4><h4 id="题：简述-getter-和-setter-写法"><a href="#题：简述-getter-和-setter-写法" class="headerlink" title="题：简述 getter 和 setter 写法"></a>题：简述 getter 和 setter 写法</h4><h4 id="题：TCP-三次握手和四次挥手，拥塞控制"><a href="#题：TCP-三次握手和四次挥手，拥塞控制" class="headerlink" title="题：TCP 三次握手和四次挥手，拥塞控制"></a>题：TCP 三次握手和四次挥手，拥塞控制</h4><h4 id="题：跨域方式（-JSONP-webSocket-等，但原理要搞懂）"><a href="#题：跨域方式（-JSONP-webSocket-等，但原理要搞懂）" class="headerlink" title="题：跨域方式（ JSONP , webSocket 等，但原理要搞懂）"></a>题：跨域方式（ JSONP , webSocket 等，但原理要搞懂）</h4><h4 id="题：Cookie-相关的头字段和格式"><a href="#题：Cookie-相关的头字段和格式" class="headerlink" title="题：Cookie 相关的头字段和格式"></a>题：Cookie 相关的头字段和格式</h4><p>Domin 域<br>Expires      绝对过期时间，<br>Max-Age   如3600 相对过期时间<br>Path=/       路径<br>Secure      只在https下发送<br>HttpOnly    不能通过js的document。cookie访问</p><h4 id="题：document-cookie-的格式，写一个封装后的函数"><a href="#题：document-cookie-的格式，写一个封装后的函数" class="headerlink" title="题：document.cookie 的格式，写一个封装后的函数"></a>题：document.cookie 的格式，写一个封装后的函数</h4><h4 id="题：session-原理（基于-Cookie-，或查询字符串，或-ETag-）"><a href="#题：session-原理（基于-Cookie-，或查询字符串，或-ETag-）" class="headerlink" title="题：session 原理（基于 Cookie ，或查询字符串，或 ETag ）"></a>题：session 原理（基于 Cookie ，或查询字符串，或 ETag ）</h4><h4 id="编程：手写代码，不产生新数组，删除数组里的重复元素（排序，-splice-）"><a href="#编程：手写代码，不产生新数组，删除数组里的重复元素（排序，-splice-）" class="headerlink" title="编程：手写代码，不产生新数组，删除数组里的重复元素（排序， splice() ）"></a>编程：手写代码，不产生新数组，删除数组里的重复元素（排序， splice() ）</h4><h4 id="题：ajax-的原生写法（创建-XHR-对象，-open-，-setRequestHeader-，"><a href="#题：ajax-的原生写法（创建-XHR-对象，-open-，-setRequestHeader-，" class="headerlink" title="题：ajax 的原生写法（创建 XHR 对象， open() ， setRequestHeader() ，"></a>题：ajax 的原生写法（创建 XHR 对象， open() ， setRequestHeader() ，</h4>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;整理常见面试题&lt;/p&gt;
&lt;h4 id=&quot;1-ES6-里-let-和-var-的区别&quot;&gt;&lt;a href=&quot;#1-ES6-里-let-和-var-的区别&quot; class=&quot;headerlink&quot; title=&quot;1. ES6 里 let 和 var 的区别&quot;&gt;&lt;/a&gt;1. ES6 
      
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>react-native横屏时模态框ios异常</title>
    <link href="http://fendicloser.top/2019/02/19/react-native%E6%A8%AA%E5%B1%8F%E6%97%B6%E6%A8%A1%E6%80%81%E6%A1%86ios%E5%BC%82%E5%B8%B8/"/>
    <id>http://fendicloser.top/2019/02/19/react-native横屏时模态框ios异常/</id>
    <published>2019-02-19T12:24:30.000Z</published>
    <updated>2019-02-19T13:13:26.227Z</updated>
    
    <content type="html"><![CDATA[<h2 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h2><p>使用’react-native-orientation’，在componentDidMount()里设置Orientation.lockToLandscape()横屏。这个时候使用<modal>在ios中就会报错。又是一个react native兼容性上的问题，来看看官方的解释：</modal></p><p><img src="/2019/02/19/react-native横屏时模态框ios异常/957.jpg" alt></p><p>也就是说，react-native需要UISupportedInterfaceOrientations的用户持久化信息。</p><h2 id="解决"><a href="#解决" class="headerlink" title="解决"></a>解决</h2><p>这是周一遇到的一个小bug，很基础所以正好写在这里：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;Modal</span><br><span class="line">      animationType=&#123;<span class="string">'slide'</span>&#125;</span><br><span class="line">      onRequestClose=&#123;()=&gt;<span class="built_in">console</span>.warn(<span class="string">"this is a close request"</span>)&#125;</span><br><span class="line">      visible=&#123;<span class="keyword">this</span>.state.showModal&#125;</span><br><span class="line">      supportedOrientations=&#123;[<span class="string">'portrait'</span>,<span class="string">'landscape'</span>]&#125;</span><br><span class="line">      &gt;</span><br><span class="line">      &lt;View&gt;<span class="xml"><span class="tag">&lt;/<span class="name">View</span>&gt;</span></span></span><br><span class="line">&lt;<span class="regexp">/Modal&gt;</span></span><br></pre></td></tr></table></figure><p>最终要的就是<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">supportedOrientations=&#123;[&apos;portrait&apos;,&apos;landscape&apos;]&#125;</span><br></pre></td></tr></table></figure></p><p>需要注意一下，modal这个组件非常的奇葩，还有一个必须设置的属性是onRequestClose，这个属性在Android平台上是必需函数。</p><h2 id="Ps"><a href="#Ps" class="headerlink" title="Ps"></a>Ps</h2><p>本人第一篇blog，刻意的加上了图片和代码段，也可以加rtc之类的。用的是开源的hexo，从知道hexo到写出这篇blog大概用了三个小时，所以还是相当好上手的。 您要是跟我说没有csdn或简书看着爽就出门左转吧。</p><p>挂到github上了，域名是从阿里云买的：<a href="http://fendicloser.top">http://fendicloser.top</a> ， 第一年9块钱，.com或.cn需要50多一年，支持https。 theme用的是svdb.co的flexy，自适应css、jade，简约但是很遗憾没有评论的功能。</p><p>以后还是会以js、react脚手架、树莓派为主要内容。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;异常&quot;&gt;&lt;a href=&quot;#异常&quot; class=&quot;headerlink&quot; title=&quot;异常&quot;&gt;&lt;/a&gt;异常&lt;/h2&gt;&lt;p&gt;使用’react-native-orientation’，在componentDidMount()里设置Orientation.lockTo
      
    
    </summary>
    
    
  </entry>
  
</feed>
