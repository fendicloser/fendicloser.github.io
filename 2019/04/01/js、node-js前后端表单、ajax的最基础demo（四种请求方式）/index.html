<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>js、node.js前后端表单、ajax的最基础demo（四种请求方式） | Longfu Sun</title><meta name="description"><meta name="generator" content="Longfu Sun"><meta name="author" content="Longfu Sun"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"><link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/images/svdb.png" alt="Longfu Sun" title="Longfu Sun"></a><h1><a href="/" alt="Longfu Sun" title="Longfu Sun" itemprop="headline">Longfu Sun</a></h1><p itemprop="description">Live a life you will remember</p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url">Home</a></li><li itemprop="name"><a href="/articles" alt="Articles" title="Articles" itemprop="url">Articles</a></li><li itemprop="name"><a href="/about" alt="About" title="About" itemprop="url">About</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">js、node.js前后端表单、ajax的最基础demo（四种请求方式）</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2019-04-01T01:11:39.000Z"> Monday, April 1st 2019 at 9:11</time><br>Last updated on<time itemprop="dateModified" datetime="2019-04-01T01:11:39.000Z"> Monday, April 1st 2019 at 12:53</time></span><p>阅读本片blog之前希望你：</p>
<h6 id="知道html-js的基本写法，"><a href="#知道html-js的基本写法，" class="headerlink" title="知道html/js的基本写法，"></a>知道html/js的基本写法，</h6><h6 id="知道npm的基本用法，知道一个前端项目最基本的要素。"><a href="#知道npm的基本用法，知道一个前端项目最基本的要素。" class="headerlink" title="知道npm的基本用法，知道一个前端项目最基本的要素。"></a>知道npm的基本用法，知道一个前端项目最基本的要素。</h6><h6 id="有最基础的node和mysql（或其他非关系数据库）知识"><a href="#有最基础的node和mysql（或其他非关系数据库）知识" class="headerlink" title="有最基础的node和mysql（或其他非关系数据库）知识"></a>有最基础的node和mysql（或其他非关系数据库）知识</h6><h6 id="听说过ajax"><a href="#听说过ajax" class="headerlink" title="听说过ajax"></a>听说过ajax</h6><p>仅此而已，如果没有，知识单纯的听说过ajax。也可以进来看看。其实这片文章的内容，属于一个计算机科学专业的本科生毕业时的必备知识。但是个人在接受教育时发现其实现在的本科教育和互联网行业的需求已经严重脱节，很多毕业生根本没听说过ajax（不论是不是前端方向）。听说过的也仅仅是为了应付面试死记硬背而已。<br>fendicloser<br>/Users/fendicloser/tedu/code/html/day05/try</p>
<h3 id="搭建服务器"><a href="#搭建服务器" class="headerlink" title="搭建服务器"></a>搭建服务器</h3><p>新建一个文件夹，导入node——module，文件夹中最少包含express和一个数据库的接口模块，<br>新建app.js作为入口文件。</p>
<p>进入文件夹终端，输入npm init 可以一直回车键，最后yes，会生成package.json, 在这个文件夹中找的script，输入<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">”start<span class="string">": "</span>node ./app.js<span class="string">",</span></span><br></pre></td></tr></table></figure></p>
<p>在app中：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br></pre></td></tr></table></figure></p>
<p>然后新建pool.js 作为数据库连接池连接池。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mysql=<span class="built_in">require</span>(<span class="string">'mysql'</span>)</span><br><span class="line"><span class="keyword">var</span> pool=mysql.createPool(&#123;</span><br><span class="line">    host:<span class="string">'127.0.0.1'</span>,</span><br><span class="line">    port:<span class="string">'3306'</span>,</span><br><span class="line">    user:<span class="string">'root'</span>,</span><br><span class="line">    password:<span class="string">'Aptx4869'</span>,</span><br><span class="line">    database:<span class="string">'xz'</span>,          <span class="comment">//连接到的数据库</span></span><br><span class="line">    connectionLimit:<span class="string">'15'</span>,<span class="comment">//连接池最大连接数</span></span><br><span class="line">&#125;)</span><br><span class="line"><span class="built_in">module</span>.exports=pool</span><br></pre></td></tr></table></figure></p>
<p>然后开始写接口，路由器，在项目下心间router文件夹，在该文件夹下创建user.js<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express =<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="comment">//创建路由器对象</span></span><br><span class="line"><span class="keyword">var</span> userRouter=express.Router()</span><br><span class="line"></span><br><span class="line"><span class="comment">//引入连接池、还有querystring和body-parser</span></span><br><span class="line"><span class="comment">//这两个是路由中经常使用到的模块，用来处理数据，</span></span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"><span class="keyword">var</span> bodyParser=<span class="built_in">require</span>(<span class="string">'body-parser'</span>)</span><br><span class="line"><span class="keyword">var</span> pool=<span class="built_in">require</span>(<span class="string">'../pool'</span>);</span><br><span class="line"><span class="comment">//use bodyParser中间件，这样在post中就可以使用req.body了</span></span><br><span class="line">router.use(bodyParser.urlencoded(&#123;<span class="attr">extended</span>:<span class="literal">false</span>&#125;))</span><br><span class="line"><span class="built_in">module</span>.exports=router</span><br></pre></td></tr></table></figure></p>
<p>在app.js中引入刚刚创建好的路由器<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> userRouter=<span class="built_in">require</span>(<span class="string">'./router/user'</span>)</span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br></pre></td></tr></table></figure></p>
<p>在项目下创建public文件夹，用来存放静态文件，在public下创建view文件夹用来存放html文件，把public托管到app.js中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">app.use(express.static(<span class="string">'public'</span>))</span><br><span class="line"><span class="comment">//如果不添加这一句，需要输入http://localhost:8080/view/user.html</span></span><br><span class="line"><span class="comment">//如果添加里，只需要输入http://localhost:8080/user.html</span></span><br><span class="line">app.use(express.static(<span class="string">'public/view'</span>))</span><br></pre></td></tr></table></figure>
<p>此时的的完整app.js是：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="keyword">var</span> userRouter=<span class="built_in">require</span>(<span class="string">'./router/user'</span>)</span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br><span class="line">app.use(express.static(<span class="string">'public'</span>))</span><br><span class="line">app.use(express.static(<span class="string">'public/view'</span>))</span><br></pre></td></tr></table></figure></p>
<p>做完这一步，服务器就基本搭好了，我们就可以开始写第一个表单了</p>
<h3 id="form表单的get请求"><a href="#form表单的get请求" class="headerlink" title="form表单的get请求"></a>form表单的get请求</h3><p>紧接着上面已有的代码<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">"get"</span> action=<span class="string">"/user/add"</span>&gt;</span><br><span class="line">    用户：&lt;input type=<span class="string">"text"</span> name=<span class="string">"uname"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    密码：&lt;input type=<span class="string">"text"</span> name=<span class="string">"upwd"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    邮箱：&lt;input type=<span class="string">"text"</span> name=<span class="string">"email"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    手机：&lt;input type=<span class="string">"text"</span> name=<span class="string">"phone"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>在user.js中写响应的路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userRouter.get(<span class="string">'/add'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.send(req.query)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/1.jpeg" alt><br><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/2.jpeg" alt></p>
<h3 id="form的post"><a href="#form的post" class="headerlink" title="form的post"></a>form的post</h3><p>完成这一步，我们在同一个html文件中再创建一个post表单，格式一摸一样，只有method和action发生了变化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;form method=<span class="string">"post"</span> action=<span class="string">"/user/addPost"</span>&gt;</span><br><span class="line">    用户：&lt;input type=<span class="string">"text"</span> name=<span class="string">"uname"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    密码：&lt;input type=<span class="string">"text"</span> name=<span class="string">"upwd"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    邮箱：&lt;input type=<span class="string">"text"</span> name=<span class="string">"email"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    手机：&lt;input type=<span class="string">"text"</span> name=<span class="string">"phone"</span>&gt;<span class="xml"><span class="tag">&lt;/<span class="name">br</span>&gt;</span></span></span><br><span class="line">    &lt;input type=<span class="string">"submit"</span>&gt;</span><br><span class="line">&lt;<span class="regexp">/form&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>然后是路由，这一次我们把数据库也加上，但是这里我懒得新创建一个新的数据库数数据表，所以执行查操作<br><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/3.jpeg" alt><br>目标是uname输入dingding，查到的数据是这一行。<br>所以接口的写法是：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">userRouter.post(<span class="string">'/addPost'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> num=<span class="number">400</span></span><br><span class="line">    <span class="keyword">var</span> obj=req.body</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> req.body)&#123;</span><br><span class="line">        num=num+<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span>(!req.body[index])&#123;</span><br><span class="line">            res.send(&#123;<span class="attr">code</span>:num,<span class="attr">msg</span>:index+<span class="string">'  required'</span>&#125;)</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    pool.query(<span class="string">'select * from xz_user where uname=?'</span>,[obj.uname],<span class="function"><span class="keyword">function</span>(<span class="params">err,result</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (!err)&#123;</span><br><span class="line">            res.send(result)</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">throw</span> err</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/4.jpeg" alt><br><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/5.jpeg" alt></p>
<h3 id="Ajax的get"><a href="#Ajax的get" class="headerlink" title="Ajax的get"></a>Ajax的get</h3><p>下一步是ajax的进行get的写法,  ajax对前端的意义不必多说，它不仅仅只有“不需要加载整个完整页面”这一个优势。<br>前端页面<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;input id=<span class="string">"tryAjax"</span> type=<span class="string">"text"</span> /&gt;</span><br><span class="line">    &lt;button onclick=<span class="string">"tryAjaxFunc()"</span>&gt;ajax&lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">    &lt;div id="result"&gt;&lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">    function tryAjaxFunc() &#123;</span></span><br><span class="line"><span class="regexp">    </span></span><br><span class="line"><span class="regexp">        var tryAjax=document.getElementById('tryAjax')</span></span><br><span class="line"><span class="regexp">        var xhr</span></span><br><span class="line"><span class="regexp">        if(window.XMLHttpRequest)&#123;xhr=new window.XMLHttpRequest()&#125;</span></span><br><span class="line"><span class="regexp">        else&#123;xhr=new ActiveXObject('Microsoft.XMLHTTP')&#125;</span></span><br><span class="line"><span class="regexp">        var url='/u</span>ser/ajaxRouter<span class="string">'+'</span>?tryAjax=<span class="string">'+tryAjax.value</span></span><br><span class="line"><span class="string">        xhr.open('</span><span class="keyword">get</span>',url,true)</span><br><span class="line">        xhr.send()</span><br><span class="line">        xhr.onreadystatechange=function () &#123;</span><br><span class="line">            <span class="keyword">if</span>(xhr.readyState==<span class="number">4</span>&amp;&amp;xhr.status==<span class="number">200</span>)&#123;</span><br><span class="line"></span><br><span class="line">                result.innerHTML=xhr.responseText</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>后台路由的写法<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userRouter.get(<span class="string">'/ajaxRouter'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.send(req.query)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>Get的写法，非常简单，url就夹带着请求的内容，<br>原生ajax的写法也是面试时会被问到的高频问题，说一下这一句，这是兼容ie8的写法，但是2018年以后，淘宝、Twitter等大型网站已经开始陆续不做ie8的兼容了，所以慢慢的，这句话可以不写了。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">else</span>&#123;xhr=<span class="keyword">new</span> ActiveXObject(<span class="string">'Microsoft.XMLHTTP'</span>)&#125;</span><br></pre></td></tr></table></figure></p>
<p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/6.jpeg" alt></p>
<h3 id="ajax的post"><a href="#ajax的post" class="headerlink" title="ajax的post"></a>ajax的post</h3><p>一定要注意，setRequestHeader一定要放在open和send中间，否则会报错！！content-type虽然很长，但是一定要记住：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;input id=<span class="string">"tryAjaxPost1"</span> type=<span class="string">"text"</span>&gt;<span class="xml"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span></span><br><span class="line">    &lt;input id="tryAjaxPost2" type="text"&gt;&lt;br&gt;</span><br><span class="line">    &lt;button onclick="tryAjaxPost()"&gt;ajax post&lt;/button&gt;</span><br><span class="line">    &lt;div id="resultPost"&gt;&lt;/div&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;script type="text/javascript"&gt;</span><br><span class="line">   tryAjaxPost=function () &#123;</span><br><span class="line">        var xhr</span><br><span class="line">        if(window.XMLHttpRequest)&#123;xhr=new window.XMLHttpRequest()&#125;</span><br><span class="line">        else xhr=new ActiveXObject('Microsoft.XMLHTTP')</span><br><span class="line">        xhr.open('post','/user/ajaxRouterPost',true)</span><br><span class="line">        var formdata='tryAjaxPost1='+tryAjaxPost1.value+'&amp;tryAjaxPost2='+tryAjaxPost2.value</span><br><span class="line">        xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded')</span><br><span class="line">        xhr.send(formdata)</span><br><span class="line">        xhr.onreadystatechange=function () &#123;</span><br><span class="line">            if(xhr.readyState==4&amp;&amp;xhr.status==200)&#123;</span><br><span class="line">                resultPost.innerHTML=xhr.responseText</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>
<p>后台没有任何的变化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">userRouter.post(<span class="string">'/ajaxRouterPost'</span>,<span class="function"><span class="keyword">function</span> (<span class="params">req,res</span>) </span>&#123;</span><br><span class="line">    res.send(req.body)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p><img src="/2019/04/01/js、node-js前后端表单、ajax的最基础demo（四种请求方式）/7.jpg" alt></p>
</article></main></body></html>