<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>express路由 | Longfu Sun</title><meta name="description"><meta name="generator" content="Longfu Sun"><meta name="author" content="Longfu Sun"><meta name="keywords" content="sjaak van den berg, svdb, bitcoin, crypto, payment, integration, bitcoins, wordpress, betaling, webshop, front end, design, ontwerp, developer"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"><link rel="alternate" type="application/atom+xml" title="Atom 0.3" href="atom.xml"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/images/svdb.png" alt="Longfu Sun" title="Longfu Sun"></a><h1><a href="/" alt="Longfu Sun" title="Longfu Sun" itemprop="headline">Longfu Sun</a></h1><p itemprop="description">Live a life you will remember</p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="Home" title="Home" itemprop="url">Home</a></li><li itemprop="name"><a href="/articles" alt="Articles" title="Articles" itemprop="url">Articles</a></li><li itemprop="name"><a href="/about" alt="About" title="About" itemprop="url">About</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">express路由</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2019-03-20T12:21:54.000Z"> Wednesday, March 20th 2019 at 20:21</time><br>Last updated on<time itemprop="dateModified" datetime="2019-03-20T12:21:54.000Z"> Wednesday, March 20th 2019 at 20:46</time></span><p>intellij或webstrom是非常非常适合前端开发的编译器，在编译器里，当我们搭建好node开发环境，express框架的雏形就已经摆在我们面前了。这其实很不利于初学者真正搞懂什么是路由、以及express搭建服务器的原理。</p>
<p>所以今天，我带来一些对express路由的理解和基础：</p>
<p>网络编程中最最基础的两个问题：</p>
<h3 id="get和post的区别："><a href="#get和post的区别：" class="headerlink" title="get和post的区别："></a>get和post的区别：</h3><h5 id="我的理解是："><a href="#我的理解是：" class="headerlink" title="我的理解是："></a>我的理解是：</h5><h5 id="get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全"><a href="#get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全" class="headerlink" title="get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全"></a>get的数据会被浏览器缓存（会被显示在地址栏），post不会，相对安全</h5><h5 id="get的速度比较快"><a href="#get的速度比较快" class="headerlink" title="get的速度比较快"></a>get的速度比较快</h5><h5 id="用户注册、登录等操作需要用post’"><a href="#用户注册、登录等操作需要用post’" class="headerlink" title="用户注册、登录等操作需要用post’"></a>用户注册、登录等操作需要用post’</h5><h5 id="查询字符串、搜索项品等没有安全要求的操作用get’"><a href="#查询字符串、搜索项品等没有安全要求的操作用get’" class="headerlink" title="查询字符串、搜索项品等没有安全要求的操作用get’"></a>查询字符串、搜索项品等没有安全要求的操作用get’</h5><h3 id="1-路由："><a href="#1-路由：" class="headerlink" title="1.路由："></a>1.路由：</h3><p>浏览器向web服务器发请求，web服务器根据请求的方法和请求的url做出响应,路由的三要素：请求的方法、请求的url、响应（回调函数）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">/引入第三方模块</span><br><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">var</span> app   = express();</span><br><span class="line"><span class="comment">//监听湍口</span></span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="comment">//請求的方法是get，請求的url是/list </span></span><br><span class="line">app.get(<span class="string">'/list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.method,req.url)</span><br><span class="line">    <span class="built_in">console</span>.log(req.headers)</span><br><span class="line">    <span class="comment">//获取查询字符创中的数据=》将url中查询字符串转成对象</span></span><br><span class="line">    <span class="built_in">console</span>.log(req.query)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>这个时候，假设url为：</p>
<h3 id="http-localhost-8080-list-lid-longfuSun-amp-age-99"><a href="#http-localhost-8080-list-lid-longfuSun-amp-age-99" class="headerlink" title="http://localhost:8080/list?lid=longfuSun&amp;age=99"></a><a href="http://localhost:8080/list?lid=longfuSun&amp;age=99" target="_blank" rel="noopener">http://localhost:8080/list?lid=longfuSun&amp;age=99</a></h3><p>最后就会返回：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;lid：lonfuSun, age：<span class="number">99</span>&#125;</span><br></pre></td></tr></table></figure>
<p>关于req和res两个参数：</p>
<table border="1"><br><tr><th>请求（req）的对象：</th><th>含义</th></tr><tr><td>req.method</td><td></td> </tr><tr><td>req.url</td><td></td></tr><tr><td>req.headers</td><td></td></tr><tr><td>req.query</td><td></td></tr><tr><td></td><td></td></tr><tr><td></td><td></td></tr></table>

<p>animation-iteration-count</p>
<table border="1"><br><tr><th>响应（res）的对象</th><th>含义</th></tr><tr><td>res.send（）</td><td>响应内容并发送，不能多次使用，如果是数字，需要转化成字符串</td> </tr><tr><td>res.sendStatus（）</td><td> 响应状态码对应的中文200-》ok</td></tr><tr><td>res.sendFile</td><td>res.sendFile（__dirname+’/‘+’文件的相对路径’）响应的重定向</td></tr><td></td></table>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//引入第三方模块</span></span><br><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建web服务器</span></span><br><span class="line"><span class="keyword">var</span> app   = express();</span><br><span class="line"></span><br><span class="line"><span class="comment">//监听湍口</span></span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="comment">//請求的方法是get，請求的url是/list </span></span><br><span class="line">app.get(<span class="string">'/list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//res.send('&lt;h1&gt;这是商品的列表&lt;/h1&gt;')</span></span><br><span class="line">	<span class="comment">//send只能发送一次，</span></span><br><span class="line">    <span class="comment">//响应文件并发送</span></span><br><span class="line">    <span class="comment">//如果这样会报错：</span></span><br><span class="line">    <span class="comment">//res.sendFile('./list.html') </span></span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/list.html'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment">//响应的重定向</span></span><br><span class="line">    res.redirect(<span class="string">'http://www.tmooc.cn'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="POST请求："><a href="#POST请求：" class="headerlink" title="POST请求："></a>POST请求：</h3><p>通过表单提交传递数据（现阶段）服务器端通过事件获取数据后期可以使用插件简化<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">app.post(<span class="string">'/mylogin'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//获取post请求的数据</span></span><br><span class="line">    req.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">buf</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//decodeURI(str)</span></span><br><span class="line">        <span class="keyword">var</span> obj=querystring.parse(<span class="built_in">decodeURI</span>(buf.toString()))</span><br><span class="line">        <span class="built_in">console</span>.log(obj)</span><br><span class="line">    &#125;)</span><br><span class="line">    res.send(<span class="string">'nihao'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">req.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">buf</span>)</span>&#123;</span><br><span class="line">	buf是查询到的数据，需要通过查询字符串将其格式化成对象</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h3 id="GET请求："><a href="#GET请求：" class="headerlink" title="GET请求："></a>GET请求：</h3><p>通过查询字符串（req.query）获取数据。不需要向服务器提交数据。<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/reg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/reg.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/myreg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'successful, 你的用户名是： '</span>+req.query.uname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="联系"><a href="#联系" class="headerlink" title="联系"></a>联系</h3><p>post.js：<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> querystring=<span class="built_in">require</span>(<span class="string">'querystring'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/login'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/login.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">//根据表单的请求写对应的路由</span></span><br><span class="line"><span class="comment">//请求的方法是post 请求的url是/mylogin</span></span><br><span class="line">app.post(<span class="string">'/mylogin'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="comment">//获取post请求的数据</span></span><br><span class="line">    req.on(<span class="string">'data'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">buf</span>)</span>&#123;</span><br><span class="line">        <span class="comment">//decodeURI(str)</span></span><br><span class="line">        <span class="keyword">var</span> obj=querystring.parse(<span class="built_in">decodeURI</span>(buf.toString()))</span><br><span class="line">        <span class="built_in">console</span>.log(obj)</span><br><span class="line">    &#125;)</span><br><span class="line">    res.send(<span class="string">'nihao'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/reg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.sendFile(__dirname+<span class="string">'/reg.html'</span>)</span><br><span class="line">&#125;)</span><br><span class="line">app.get(<span class="string">'/myreg'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'successful, 你的用户名是： '</span>+req.query.uname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<p>login.html<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;<span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;p&gt;请您注册&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;form action="/my</span>login<span class="string">" method="</span>POST<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;!-- name ：用于设置数据的名称，用于服务器获取该数据 --&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">                &lt;br/&gt;</span></span><br><span class="line"><span class="string">                用户：</span></span><br><span class="line"><span class="string">                &lt;input id="</span>name<span class="string">" type="</span>text<span class="string">" name="</span>姓名<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;br/&gt;</span></span><br><span class="line"><span class="string">                密码：</span></span><br><span class="line"><span class="string">                &lt;input id="</span>password<span class="string">"type="</span>password<span class="string">" name="</span>password<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">            &lt;br/&gt;</span></span><br><span class="line"><span class="string">            &lt;div&gt;</span></span><br><span class="line"><span class="string">                &lt;input type="</span>submit<span class="string">" name="</span>提交<span class="string">"&gt;</span></span><br><span class="line"><span class="string">            &lt;/div&gt;</span></span><br><span class="line"><span class="string">                </span></span><br><span class="line"><span class="string">        &lt;/form&gt;</span></span><br><span class="line"><span class="string">        &lt;script&gt;</span></span><br><span class="line"><span class="string">            onsubmit=function()&#123;</span></span><br><span class="line"><span class="string">                var name=document.getElementById('name').value</span></span><br><span class="line"><span class="string">                var password=document.getElementById('password').value</span></span><br><span class="line"><span class="string">                //alert("</span>名字是:<span class="string">"+name+"</span>密码是：<span class="string">"+password)</span></span><br><span class="line"><span class="string">            &#125;</span></span><br><span class="line"><span class="string">        &lt;/script&gt;</span></span><br><span class="line"><span class="string">    &lt;/body&gt;</span></span><br><span class="line"><span class="string">&lt;/html&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>reg.html<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">    &lt;head&gt;<span class="xml"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span></span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;form method=<span class="string">"GET"</span> action=<span class="string">"/myreg"</span>&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p&gt;user name&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;input type="text" name="uname"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                    &lt;p&gt;password&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;input type="password" name="password"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;p&gt;phone number&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">                &lt;input type="text" name="phone number"&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;input type=<span class="string">"submit"</span> name=<span class="string">"submit"</span>&gt;</span><br><span class="line">            &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">            </span></span><br><span class="line"><span class="regexp">        &lt;/</span>form&gt;</span><br><span class="line">    &lt;<span class="regexp">/body&gt;</span></span><br><span class="line"><span class="regexp">&lt;/</span>html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="用路由来传递数据"><a href="#用路由来传递数据" class="headerlink" title="用路由来传递数据"></a>用路由来传递数据</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用路由传递参数</span></span><br><span class="line"><span class="comment">//请求方法：get 请求的url：/detail</span></span><br><span class="line"><span class="comment">//其中的:/lid就是不同的商品的路由</span></span><br><span class="line">app.get(<span class="string">'/detail/:lid'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(req.params)<span class="comment">//&#123; lid: '5' &#125;</span></span><br><span class="line">    res.send(<span class="string">'商品详情detail of goods:'</span>+req.params.lid)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<p>练习：创建购物车的路由，请求方法是get 请求url、shopping，传递商品的价格和名称把接收的两项响应到浏览器中<br><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">app.get(<span class="string">'/shopping/:price/:pname'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'商品的价格是：'</span>+req.params.price+<span class="string">'商品的名称是：'</span>+req.params.pname)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure></p>
<h3 id="路由器"><a href="#路由器" class="headerlink" title="路由器"></a>路由器</h3><p>路由在使用过程中，不同模块下的路由可能出现相同的URL, 把同一个模块下的路由挂在在特定的的前缀<br>例如：</p>
<h5 id="用户列表：-list-商品列表：也是-list"><a href="#用户列表：-list-商品列表：也是-list" class="headerlink" title="用户列表：/list   商品列表：也是/list"></a>用户列表：/list   商品列表：也是/list</h5><h5 id="但是用户模块下的列表可以变成：-user-list"><a href="#但是用户模块下的列表可以变成：-user-list" class="headerlink" title="但是用户模块下的列表可以变成：    /user/list"></a>但是用户模块下的列表可以变成：    /user/list</h5><h5 id="商品模块下可以变成：-product-list"><a href="#商品模块下可以变成：-product-list" class="headerlink" title="商品模块下可以变成：/product/list"></a>商品模块下可以变成：/product/list</h5><p>新建js文件：<br>user.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">var</span> router=express.Router()</span><br><span class="line"><span class="comment">//往路由器中添加模块下的所有路由</span></span><br><span class="line"><span class="comment">//用户列表的路由</span></span><br><span class="line">router.get(<span class="string">'/list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'list'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">router.get(<span class="string">'/delete'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">req,res</span>)</span>&#123;</span><br><span class="line">    res.send(<span class="string">'delete'</span>)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports=router</span><br></pre></td></tr></table></figure>
<p>在服务器中：<br>router.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express=<span class="built_in">require</span>(<span class="string">'express'</span>)</span><br><span class="line"><span class="keyword">const</span> userRouter=<span class="built_in">require</span>(<span class="string">'./user.js'</span>)</span><br><span class="line"><span class="keyword">var</span> app=express()</span><br><span class="line">app.listen(<span class="number">8080</span>)</span><br><span class="line"><span class="comment">//先引入</span></span><br><span class="line"><span class="comment">//再挂载</span></span><br><span class="line"><span class="comment">//第一个是要挂载的路由器</span></span><br><span class="line">app.use(<span class="string">'/user'</span>,userRouter)</span><br></pre></td></tr></table></figure>
</article></main></body></html>